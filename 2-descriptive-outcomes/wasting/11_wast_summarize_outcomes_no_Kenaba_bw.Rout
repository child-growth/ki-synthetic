
R version 3.6.1 (2019-07-05) -- "Action of the Toes"
Copyright (C) 2019 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

> 
> 
> 
> 
> rm(list = ls())
> source(paste0(here::here(), "/0-config.R"))
── Attaching packages ────────────────────────────────── tidyverse 1.3.0.9000 ──
✔ ggplot2 3.2.1     ✔ purrr   0.3.3
✔ tibble  2.1.3     ✔ dplyr   0.8.3
✔ tidyr   1.0.0     ✔ stringr 1.4.0
✔ readr   1.3.1     ✔ forcats 0.4.0
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
here() starts at /home/andrew.mertens/ki-longitudinal-manuscripts

Attaching package: ‘gridExtra’

The following object is masked from ‘package:dplyr’:

    combine


Attaching package: ‘reshape2’

The following object is masked from ‘package:tidyr’:

    smiths

Loading required package: Matrix

Attaching package: ‘Matrix’

The following objects are masked from ‘package:tidyr’:

    expand, pack, unpack

Loading 'metafor' package (version 2.1-0). For an overview 
and introduction to the package please type: help(metafor).

Attaching package: ‘data.table’

The following objects are masked from ‘package:reshape2’:

    dcast, melt

The following objects are masked from ‘package:dplyr’:

    between, first, last

The following object is masked from ‘package:purrr’:

    transpose

Loading required package: viridisLite

Attaching package: ‘maps’

The following object is masked from ‘package:purrr’:

    map


Attaching package: ‘ggridges’

The following object is masked from ‘package:ggplot2’:

    scale_discrete_manual


Attaching package: ‘assertthat’

The following object is masked from ‘package:tibble’:

    has_name

Loading required package: nlme

Attaching package: ‘nlme’

The following object is masked from ‘package:dplyr’:

    collapse

This is mgcv 1.8-30. For overview type 'help("mgcv-package")'.

Attaching package: ‘lazyeval’

The following objects are masked from ‘package:purrr’:

    is_atomic, is_formula


Attaching package: ‘rlang’

The following objects are masked from ‘package:lazyeval’:

    as_name, call_modify, call_standardise, expr_label, expr_text,
    f_env, f_env<-, f_label, f_lhs, f_lhs<-, f_rhs, f_rhs<-, f_text,
    is_atomic, is_call, is_formula, is_lang, is_pairlist, missing_arg

The following object is masked from ‘package:assertthat’:

    has_name

The following object is masked from ‘package:data.table’:

    :=

The following objects are masked from ‘package:purrr’:

    %@%, as_function, flatten, flatten_chr, flatten_dbl, flatten_int,
    flatten_lgl, flatten_raw, invoke, list_along, modify, prepend,
    splice


Attaching package: ‘scales’

The following object is masked from ‘package:viridis’:

    viridis_pal

The following object is masked from ‘package:purrr’:

    discard

The following object is masked from ‘package:readr’:

    col_factor


Attaching package: ‘foreach’

The following objects are masked from ‘package:purrr’:

    accumulate, when

Loading required package: iterators
Loading required package: parallel
Loading required package: survival

Attaching package: ‘survey’

The following object is masked from ‘package:graphics’:

    dotchart

Loading required package: bit
Attaching package bit
package:bit (c) 2008-2012 Jens Oehlschlaegel (GPL-2)
creators: bit bitwhich
coercion: as.logical as.integer as.bit as.bitwhich which
operator: ! & | xor != ==
querying: print length any all min max range sum summary
bit access: length<- [ [<- [[ [[<-
for more help type ?bit

Attaching package: ‘bit’

The following object is masked from ‘package:data.table’:

    setattr

The following object is masked from ‘package:base’:

    xor

Attaching package bit64
package:bit64 (c) 2011-2012 Jens Oehlschlaegel
creators: integer64 seq :
coercion: as.integer64 as.vector as.logical as.integer as.double as.character as.bin
logical operator: ! & | xor != == < <= >= >
arithmetic operator: + - * / %/% %% ^
math: sign abs sqrt log log2 log10
math: floor ceiling trunc round
querying: is.integer64 is.vector [is.atomic} [length] format print str
values: is.na is.nan is.finite is.infinite
aggregation: any all min max range sum prod
cumulation: diff cummin cummax cumsum cumprod
access: length<- [ [<- [[ [[<-
combine: c rep cbind rbind as.data.frame
WARNING don't use as subscripts
WARNING semantics differ from integer
for more help type ?bit64

Attaching package: ‘bit64’

The following object is masked from ‘package:bit’:

    still.identical

The following objects are masked from ‘package:base’:

    :, %in%, is.double, match, order, rank


Attaching package: ‘zoo’

The following objects are masked from ‘package:base’:

    as.Date, as.Date.numeric

Warning message:
New theme missing the following elements: line, rect, text, axis.title.x, axis.title.x.top, axis.title.y, axis.title.y.right, axis.text, axis.text.x, axis.text.x.top, axis.text.y, axis.text.y.right, axis.ticks, axis.ticks.length, axis.ticks.length.x, axis.ticks.length.x.top, axis.ticks.length.x.bottom, axis.ticks.length.y, axis.ticks.length.y.left, axis.ticks.length.y.right, axis.line, axis.line.x, axis.line.y, legend.background, legend.margin, legend.spacing, legend.spacing.x, legend.spacing.y, legend.key, legend.key.size, legend.key.height, legend.key.width, legend.text, legend.text.align, legend.title, legend.title.align, legend.position, legend.direction, legend.justification, legend.box, legend.box.margin, legend.box.background, legend.box.spacing, panel.background, panel.border, panel.spacing, panel.spacing.x, panel.spacing.y, panel.grid, panel.grid.minor, panel.ontop, plot.background, plot.title, plot.subtitle, plot.caption, plot.tag, plot.tag.position, plot.margin, strip.backgr [... truncated] 
> source(paste0(here::here(),"/0-project-functions/0_descriptive_epi_wast_functions.R"))
> 
> load(paste0(ghapdata_dir, "Wasting_inc_data.RData"))
> 
> #Subset to monthly
> d <- d %>% filter(measurefreq == "monthly")
> d_noBW <- d_noBW %>% filter(measurefreq == "monthly")
> 
> 
> #Drop birth measure from MRC kenaba
> d <- d %>% filter(!(studyid=="Keneba" & agedays==1))
> d_noBW <- d_noBW %>% filter(!(studyid=="Keneba" & agedays==1))
> 
> 
> #Prevalence
> d <- calc.prev.agecat(d)
> prev.data <- summary.prev.whz(d, method="FE")
Warning messages:
1: Extra argument ('method') disregarded. 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
6: Extra argument ('method') disregarded. 
7: Extra argument ('method') disregarded. 
8: Extra argument ('method') disregarded. 
9: Extra argument ('method') disregarded. 
10: `as.tibble()` is deprecated, use `as_tibble()` (but mind the new semantics).
This warning is displayed once per session. 
> prev.region <- d %>% group_by(region) %>% do(summary.prev.whz(., method="FE")$prev.res)
There were 27 warnings (use warnings() to see them)
> prev.country <- d %>% group_by(region, country) %>% do(summary.prev.whz(., method="FE")$prev.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> prev.cohort <-
+   prev.data$prev.cohort %>% subset(., select = c(cohort, region, agecat, nmeas,  prev,  ci.lb,  ci.ub)) %>%
+   rename(est = prev,  lb = ci.lb,  ub = ci.ub)
> 
> prev <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", prev.data$prev.res),
+   data.frame(cohort = "pooled", prev.country),
+   data.frame(cohort = "pooled", prev.region),
+   prev.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
8: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
9: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
10: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> #Severe wasting prevalence
> sev.prev.data <- summary.prev.whz(d, severe.wasted = T, method="FE")
Warning messages:
1: Extra argument ('method') disregarded. 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
6: Extra argument ('method') disregarded. 
7: Extra argument ('method') disregarded. 
8: Extra argument ('method') disregarded. 
9: Extra argument ('method') disregarded. 
> sev.prev.region <- d %>% group_by(region) %>% do(summary.prev.whz(., severe.wasted = T, method="FE")$prev.res)
There were 27 warnings (use warnings() to see them)
> sev.prev.country <- d %>% group_by(region, country) %>% do(summary.prev.whz(., severe.wasted = T, method="FE")$prev.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> 
> sev.prev.cohort <-
+   sev.prev.data$prev.cohort %>% subset(., select = c(cohort, region, agecat, nmeas,  prev,  ci.lb,  ci.ub)) %>%
+   rename(est = prev,  lb = ci.lb,  ub = ci.ub)
> 
> sev.prev <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", sev.prev.data$prev.res),
+   data.frame(cohort = "pooled", sev.prev.country),
+   data.frame(cohort = "pooled", sev.prev.region),
+   sev.prev.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
8: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
9: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
10: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> #mean whz
> whz.data <- summary.whz(d, method="FE")
Warning messages:
1: Extra argument ('method') disregarded. 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
6: Extra argument ('method') disregarded. 
7: Extra argument ('method') disregarded. 
8: Extra argument ('method') disregarded. 
9: Extra argument ('method') disregarded. 
> whz.region <- d %>% group_by(region) %>% do(summary.whz(., method="FE")$whz.res)
There were 27 warnings (use warnings() to see them)
> whz.country <- d %>% group_by(region, country) %>% do(summary.whz(., method="FE")$whz.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> whz.cohort <-
+   whz.data$whz.cohort %>% subset(., select = c(cohort, region, agecat, nmeas,  meanwhz,  ci.lb,  ci.ub)) %>%
+   rename(est = meanwhz,  lb = ci.lb,  ub = ci.ub)
> 
> whz <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", whz.data$whz.res),
+   data.frame(cohort = "pooled", whz.country),
+   data.frame(cohort = "pooled", whz.region),
+   whz.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> 
> #monthly mean whz
> d <- calc.monthly.agecat(d)
> monthly.data <- summary.whz(d, method="FE")
There were 25 warnings (use warnings() to see them)
> monthly.region <- d %>% group_by(region) %>% do(summary.whz(., method="FE")$whz.res)
There were 50 or more warnings (use warnings() to see the first 50)
> monthly.country <- d %>% group_by(region, country) %>% do(summary.whz(., method="FE")$whz.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> monthly.cohort <-
+   monthly.data$whz.cohort %>% subset(., select = c(cohort, region, agecat, nmeas,  meanwhz,  ci.lb,  ci.ub)) %>%
+   rename(est = meanwhz,  lb = ci.lb,  ub = ci.ub)
> 
> monthly.whz <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", monthly.data$whz.res),
+   data.frame(cohort = "pooled", monthly.country),
+   data.frame(cohort = "pooled", monthly.region),
+   monthly.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> #Get monthly whz quantiles
> quantile_d <- d %>% group_by(agecat, region) %>%
+   mutate(fifth_perc = quantile(whz, probs = c(0.05))[[1]],
+          fiftieth_perc = quantile(whz, probs = c(0.5))[[1]],
+          ninetyfifth_perc = quantile(whz, probs = c(0.95))[[1]]) %>%
+   select(agecat, region, fifth_perc, fiftieth_perc, ninetyfifth_perc)
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
> quantile_d_country <- d %>% group_by(agecat, country) %>%
+   mutate(fifth_perc = quantile(whz, probs = c(0.05))[[1]],
+          fiftieth_perc = quantile(whz, probs = c(0.5))[[1]],
+          ninetyfifth_perc = quantile(whz, probs = c(0.95))[[1]]) %>%
+   select(agecat, region, fifth_perc, fiftieth_perc, ninetyfifth_perc)
Adding missing grouping variables: `country`
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
> quantile_d_overall <- d %>% group_by(agecat) %>%
+   mutate(fifth_perc = quantile(whz, probs = c(0.05))[[1]],
+          fiftieth_perc = quantile(whz, probs = c(0.5))[[1]],
+          ninetyfifth_perc = quantile(whz, probs = c(0.95))[[1]]) %>%
+   select(agecat, fifth_perc, fiftieth_perc, ninetyfifth_perc)
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
> save(quantile_d, quantile_d_country, quantile_d_overall, file = paste0(here(),"/results/quantile_data_wasting.Rdata"))
> 
> 
> 
> #Cumulative inc 3 month intervals
> d3 <- calc.ci.agecat(d, range = 3)
> 
> ci.data3 <- summary.wast.ci(d3, age.range=3, method="FE")
Warning messages:
1: Extra argument ('method') disregarded. 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
6: Extra argument ('method') disregarded. 
7: Extra argument ('method') disregarded. 
8: Extra argument ('method') disregarded. 
> ci.region3 <- d3 %>% group_by(region) %>% do(summary.wast.ci(., age.range=3, method="FE")$ci.res)
There were 24 warnings (use warnings() to see them)
> ci.country3 <- d3 %>% group_by(region, country) %>% do(summary.wast.ci(., age.range=3, method="FE")$ci.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> ci.cohort3 <-
+   ci.data3$ci.cohort %>% subset(., select = c(cohort, region, agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> ci_3 <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", ci.data3$ci.res),
+   data.frame(cohort = "pooled", ci.country3),
+   data.frame(cohort = "pooled", ci.region3),
+   ci.cohort3
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
8: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
9: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
10: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> #Incidence proportions 3 month intervals
> ip.data3 <- summary.incprop(d3, method="FE")
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
6: Extra argument ('method') disregarded. 
7: Extra argument ('method') disregarded. 
8: Extra argument ('method') disregarded. 
9: Extra argument ('method') disregarded. 
> ip.region3 <- d3 %>% group_by(region) %>% do(summary.incprop(., method="FE")$ci.res)
There were 27 warnings (use warnings() to see them)
> ip.country3 <- d3 %>% group_by(region, country) %>% do(summary.incprop(., method="FE")$ci.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> ip.cohort3 <-
+   ip.data3$ci.cohort %>% subset(., select = c(cohort, region, agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> ip_3 <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", ip.data3$ci.res),
+   data.frame(cohort = "pooled", ip.country3),
+   data.frame(cohort = "pooled", ip.region3),
+   ip.cohort3
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> 
> #Cumulative inc, no birth
> d_noBW <- calc.ci.agecat(d_noBW, range = 6)
> ci.data.nobirth <- summary.wast.ci(d_noBW, age.range=6, method="FE")
Warning messages:
1: Extra argument ('method') disregarded. 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
> ci.region.nobirth <- d %>% group_by(region) %>% do(summary.wast.ci(., age.range=6, method="FE")$ci.res)
There were 50 or more warnings (use warnings() to see the first 50)
> ci.country.nobirth <- d %>% group_by(region, country) %>% do(summary.wast.ci(., age.range=6, method="FE")$ci.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> ci.cohort.nobirth <-
+   ci.data.nobirth$ci.cohort %>% subset(., select = c(cohort, region, agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> ci_nobw <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", ci.data.nobirth$ci.res),
+   data.frame(cohort = "pooled", ci.country.nobirth),
+   data.frame(cohort = "pooled", ci.region.nobirth),
+   ci.cohort.nobirth
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
8: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
9: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
10: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> 
> #Cumulative inc 3 month intervals, no birth wasting
> d3 <- calc.ci.agecat(d_noBW)
> ci.data.nobirth3 <- summary.wast.ci(d3, age.range=3, method="FE")
Warning messages:
1: Extra argument ('method') disregarded. 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
6: Extra argument ('method') disregarded. 
7: Extra argument ('method') disregarded. 
8: Extra argument ('method') disregarded. 
> ci.region.nobirth3 <- d3 %>% group_by(region) %>% do(summary.wast.ci(., age.range=3, method="FE")$ci.res)
There were 24 warnings (use warnings() to see them)
> ci.country.nobirth3 <- d3 %>% group_by(region, country) %>% do(summary.wast.ci(., age.range=3, method="FE")$ci.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> ci.cohort.nobirth3 <-
+   ci.data.nobirth3$ci.cohort %>% subset(., select = c(cohort, region, agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> ci_nobw3 <- bind_rows(
+   data.frame(
+     cohort = "pooled",
+     region = "Overall",
+     ci.data.nobirth3$ci.res
+   ),
+   data.frame(cohort = "pooled", ci.country.nobirth3),
+   data.frame(cohort = "pooled", ci.region.nobirth3),
+   ci.cohort.nobirth3
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
8: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
9: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
10: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> 
> #Cumulative inc of severe wasting
> d <- calc.ci.agecat(d, range = 6)
> agelst = list("0-6 months", "6-12 months", "12-18 months", "18-24 months")
> sev.ci.data <- summary.wast.ci(d=d,  severe.wasted = T, age.range=6, method="FE")
Warning messages:
1: Extra argument ('method') disregarded. 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
> sev.ci.region <- d %>% group_by(region) %>% do(summary.wast.ci(., severe.wasted = T, age.range=6, method="FE")$ci.res)
There were 12 warnings (use warnings() to see them)
> sev.ci.country <- d %>% group_by(region, country) %>% do(summary.wast.ci(., severe.wasted = T, age.range=6, method="FE")$ci.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> sev.ci.cohort <-
+   sev.ci.data$ci.cohort %>% subset(., select = c(cohort, region, agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> sev.ci <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", sev.ci.data$ci.res),
+   data.frame(cohort = "pooled", sev.ci.country),
+   data.frame(cohort = "pooled", sev.ci.region),
+   sev.ci.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
8: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
9: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
10: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> 
> #Incidence rate
> ir.data <- summary.ir(d, method="FE")
# A tibble: 5 x 4
  agecat       inc.case     ptar cruderate
  <fct>           <dbl>    <dbl>     <dbl>
1 0-6 months       2169 1261808.  0.00172 
2 6-12 months      1326 1422151   0.000932
3 12-18 months      986 1222784.  0.000806
4 18-24 months      729 1115810.  0.000653
5 <NA>              653 2123329   0.000308
# A tibble: 70 x 7
# Groups:   studyid, country [18]
   studyid        country    agecat         ptar ncase nchild nstudy
   <chr>          <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA      0-6 months   39740    201    368      1
 2 CMC-V-BCS-2002 INDIA      6-12 months  54754     66    372      1
 3 CMC-V-BCS-2002 INDIA      12-18 months 58134.    34    373      1
 4 CMC-V-BCS-2002 INDIA      18-24 months 61138.    23    373      1
 5 CMIN           BANGLADESH 0-6 months   35058.    52    272      1
 6 CMIN           BANGLADESH 6-12 months  40490.    56    252      1
 7 CMIN           BANGLADESH 12-18 months 36807     43    250      1
 8 CMIN           BANGLADESH 18-24 months 37222.    39    247      1
 9 CONTENT        PERU       0-6 months   34982.     4    215      1
10 CONTENT        PERU       6-12 months  40798.     0    215      1
# … with 60 more rows
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
6: Extra argument ('method') disregarded. 
> ir.region <- d %>% group_by(region) %>% do(summary.ir(., method="FE")$ir.res)
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        751 673898.  0.00111 
2 6-12 months       738 732546   0.00101 
3 12-18 months      485 622889   0.000779
4 18-24 months      342 533542   0.000641
5 <NA>              180 542801   0.000332
# A tibble: 16 x 7
# Groups:   studyid, country [4]
   studyid       country                  agecat        ptar ncase nchild nstudy
   <chr>         <chr>                    <fct>        <dbl> <dbl>  <int>  <int>
 1 Keneba        GAMBIA                   0-6 months  2.85e5   361   2435      1
 2 Keneba        GAMBIA                   6-12 months 3.56e5   489   2388      1
 3 Keneba        GAMBIA                   12-18 mont… 3.28e5   317   2283      1
 4 Keneba        GAMBIA                   18-24 mont… 4.02e5   298   2206      1
 5 MAL-ED        SOUTH AFRICA             0-6 months  3.79e4    36    312      1
 6 MAL-ED        SOUTH AFRICA             6-12 months 4.49e4    23    259      1
 7 MAL-ED        SOUTH AFRICA             12-18 mont… 4.25e4    18    253      1
 8 MAL-ED        SOUTH AFRICA             18-24 mont… 4.28e4    10    242      1
 9 MAL-ED        TANZANIA, UNITED REPUBL… 0-6 months  3.80e4    14    261      1
10 MAL-ED        TANZANIA, UNITED REPUBL… 6-12 months 4.32e4    16    245      1
11 MAL-ED        TANZANIA, UNITED REPUBL… 12-18 mont… 3.91e4    11    233      1
12 MAL-ED        TANZANIA, UNITED REPUBL… 18-24 mont… 4.02e4    10    228      1
13 TanzaniaChil… TANZANIA, UNITED REPUBL… 0-6 months  3.13e5   340   2396      1
14 TanzaniaChil… TANZANIA, UNITED REPUBL… 6-12 months 2.88e5   210   1996      1
15 TanzaniaChil… TANZANIA, UNITED REPUBL… 12-18 mont… 2.13e5   139   1455      1
16 TanzaniaChil… TANZANIA, UNITED REPUBL… 18-24 mont… 4.85e4    24    960      1
# A tibble: 5 x 4
  agecat       inc.case     ptar cruderate
  <fct>           <dbl>    <dbl>     <dbl>
1 0-6 months       1378  441997   0.00312 
2 6-12 months       557  519924.  0.00107 
3 12-18 months      481  477567   0.00101 
4 18-24 months      374  479580.  0.000780
5 <NA>              464 1343251   0.000345
# A tibble: 39 x 7
# Groups:   studyid, country [10]
   studyid        country    agecat         ptar ncase nchild nstudy
   <chr>          <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA      0-6 months   39740    201    368      1
 2 CMC-V-BCS-2002 INDIA      6-12 months  54754     66    372      1
 3 CMC-V-BCS-2002 INDIA      12-18 months 58134.    34    373      1
 4 CMC-V-BCS-2002 INDIA      18-24 months 61138.    23    373      1
 5 CMIN           BANGLADESH 0-6 months   35058.    52    272      1
 6 CMIN           BANGLADESH 6-12 months  40490.    56    252      1
 7 CMIN           BANGLADESH 12-18 months 36807     43    250      1
 8 CMIN           BANGLADESH 18-24 months 37222.    39    247      1
 9 EE             PAKISTAN   0-6 months   47991    127    380      1
10 EE             PAKISTAN   6-12 months  55494.    62    374      1
# … with 29 more rows
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months         40 145914  0.000274 
2 6-12 months        31 169682. 0.000183 
3 12-18 months       20 122328. 0.000163 
4 18-24 months       13 102688  0.000127 
5 <NA>                9 237277  0.0000379
# A tibble: 15 x 7
# Groups:   studyid, country [4]
   studyid       country   agecat         ptar ncase nchild nstudy
   <chr>         <chr>     <fct>         <dbl> <dbl>  <int>  <int>
 1 CONTENT       PERU      0-6 months   34982.     4    215      1
 2 CONTENT       PERU      6-12 months  40798.     0    215      1
 3 CONTENT       PERU      12-18 months 31704.     1    214      1
 4 CONTENT       PERU      18-24 months 35398      2    197      1
 5 Guatemala BSC GUATEMALA 0-6 months   39983     10    295      1
 6 Guatemala BSC GUATEMALA 6-12 months  47372.    22    277      1
 7 Guatemala BSC GUATEMALA 12-18 months 15858.     6    186      1
 8 MAL-ED        BRAZIL    0-6 months   31084.    15    233      1
 9 MAL-ED        BRAZIL    6-12 months  35566.     3    207      1
10 MAL-ED        BRAZIL    12-18 months 33302.     2    194      1
11 MAL-ED        BRAZIL    18-24 months 30342      4    176      1
12 MAL-ED        PERU      0-6 months   39866     11    302      1
13 MAL-ED        PERU      6-12 months  45946      6    270      1
14 MAL-ED        PERU      12-18 months 41464     11    244      1
15 MAL-ED        PERU      18-24 months 36948      7    219      1
There were 18 warnings (use warnings() to see them)
> ir.country <- d %>% group_by(region, country) %>% do(summary.ir(., method="FE")$ir.res) 
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        361 285056   0.00127 
2 6-12 months       489 356000.  0.00137 
3 12-18 months      317 328275   0.000966
4 18-24 months      298 402040   0.000741
5 <NA>              136 166442.  0.000817
# A tibble: 4 x 7
# Groups:   studyid, country [1]
  studyid country agecat          ptar ncase nchild nstudy
  <chr>   <chr>   <fct>          <dbl> <dbl>  <int>  <int>
1 Keneba  GAMBIA  0-6 months   285056    361   2435      1
2 Keneba  GAMBIA  6-12 months  356000.   489   2388      1
3 Keneba  GAMBIA  12-18 months 328275    317   2283      1
4 Keneba  GAMBIA  18-24 months 402040    298   2206      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months         36  37930   0.000949
2 6-12 months        23  44895   0.000512
3 12-18 months       18  42525   0.000423
4 18-24 months       10  42836.  0.000233
5 <NA>               25 200511   0.000125
# A tibble: 4 x 7
# Groups:   studyid, country [1]
  studyid country      agecat         ptar ncase nchild nstudy
  <chr>   <chr>        <fct>         <dbl> <dbl>  <int>  <int>
1 MAL-ED  SOUTH AFRICA 0-6 months   37930     36    312      1
2 MAL-ED  SOUTH AFRICA 6-12 months  44895     23    259      1
3 MAL-ED  SOUTH AFRICA 12-18 months 42525     18    253      1
4 MAL-ED  SOUTH AFRICA 18-24 months 42836.    10    242      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        354 350912.  0.00101 
2 6-12 months       226 331652.  0.000681
3 12-18 months      150 252089   0.000595
4 18-24 months       34  88666.  0.000383
5 <NA>               19 175848.  0.000108
# A tibble: 8 x 7
# Groups:   studyid, country [2]
  studyid       country                   agecat        ptar ncase nchild nstudy
  <chr>         <chr>                     <fct>        <dbl> <dbl>  <int>  <int>
1 MAL-ED        TANZANIA, UNITED REPUBLI… 0-6 months  3.80e4    14    261      1
2 MAL-ED        TANZANIA, UNITED REPUBLI… 6-12 months 4.32e4    16    245      1
3 MAL-ED        TANZANIA, UNITED REPUBLI… 12-18 mont… 3.91e4    11    233      1
4 MAL-ED        TANZANIA, UNITED REPUBLI… 18-24 mont… 4.02e4    10    228      1
5 TanzaniaChil… TANZANIA, UNITED REPUBLI… 0-6 months  3.13e5   340   2396      1
6 TanzaniaChil… TANZANIA, UNITED REPUBLI… 6-12 months 2.88e5   210   1996      1
7 TanzaniaChil… TANZANIA, UNITED REPUBLI… 12-18 mont… 2.13e5   139   1455      1
8 TanzaniaChil… TANZANIA, UNITED REPUBLI… 18-24 mont… 4.85e4    24    960      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        300 151240.  0.00198 
2 6-12 months       106 159409   0.000665
3 12-18 months      115 147796   0.000778
4 18-24 months      101 168220   0.000600
5 <NA>              144 657346   0.000219
# A tibble: 12 x 7
# Groups:   studyid, country [3]
   studyid country    agecat         ptar ncase nchild nstudy
   <chr>   <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMIN    BANGLADESH 0-6 months   35058.    52    272      1
 2 CMIN    BANGLADESH 6-12 months  40490.    56    252      1
 3 CMIN    BANGLADESH 12-18 months 36807     43    250      1
 4 CMIN    BANGLADESH 18-24 months 37222.    39    247      1
 5 MAL-ED  BANGLADESH 0-6 months   32279     63    263      1
 6 MAL-ED  BANGLADESH 6-12 months  40672     18    240      1
 7 MAL-ED  BANGLADESH 12-18 months 36262.    25    231      1
 8 MAL-ED  BANGLADESH 18-24 months 34475     18    219      1
 9 PROVIDE BANGLADESH 0-6 months   83902    185    700      1
10 PROVIDE BANGLADESH 6-12 months  78248.    32    611      1
11 PROVIDE BANGLADESH 12-18 months 74726.    47    605      1
12 PROVIDE BANGLADESH 18-24 months 96522.    44    583      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        527 111912.  0.00471 
2 6-12 months       175 150272   0.00116 
3 12-18 months      111 149058   0.000745
4 18-24 months       87 161994   0.000537
5 <NA>              287 542841   0.000529
# A tibble: 12 x 7
# Groups:   studyid, country [3]
   studyid        country agecat         ptar ncase nchild nstudy
   <chr>          <chr>   <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA   0-6 months   39740    201    368      1
 2 CMC-V-BCS-2002 INDIA   6-12 months  54754     66    372      1
 3 CMC-V-BCS-2002 INDIA   12-18 months 58134.    34    373      1
 4 CMC-V-BCS-2002 INDIA   18-24 months 61138.    23    373      1
 5 IRC            INDIA   0-6 months   42886.   240    410      1
 6 IRC            INDIA   6-12 months  58724.    68    409      1
 7 IRC            INDIA   12-18 months 58184     50    410      1
 8 IRC            INDIA   18-24 months 64657     37    410      1
 9 MAL-ED         INDIA   0-6 months   29286     86    251      1
10 MAL-ED         INDIA   6-12 months  36794.    41    235      1
11 MAL-ED         INDIA   12-18 months 32740.    27    229      1
12 MAL-ED         INDIA   18-24 months 36200.    27    228      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        311 100082.  0.00311 
2 6-12 months       166 121646.  0.00136 
3 12-18 months      125 113550   0.00110 
4 18-24 months      139 110104.  0.00126 
5 <NA>               32 140611   0.000228
# A tibble: 8 x 7
# Groups:   studyid, country [2]
  studyid   country agecat         ptar ncase nchild nstudy
  <chr>     <chr>   <fct>         <dbl> <dbl>  <int>  <int>
1 GMS-Nepal NEPAL   0-6 months   67850.   263    686      1
2 GMS-Nepal NEPAL   6-12 months  79330    155    582      1
3 GMS-Nepal NEPAL   12-18 months 75572.   106    574      1
4 GMS-Nepal NEPAL   18-24 months 69404.   119    568      1
5 MAL-ED    NEPAL   0-6 months   32233     48    240      1
6 MAL-ED    NEPAL   6-12 months  42316.    11    235      1
7 MAL-ED    NEPAL   12-18 months 37978.    19    231      1
8 MAL-ED    NEPAL   18-24 months 40699     20    229      1
# A tibble: 5 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-6 months        240 78762.  0.00305 
2 6-12 months       110 88596   0.00124 
3 12-18 months      130 67163   0.00194 
4 18-24 months       47 39263   0.00120 
5 <NA>                1  2453   0.000408
# A tibble: 7 x 7
# Groups:   studyid, country [2]
  studyid country  agecat         ptar ncase nchild nstudy
  <chr>   <chr>    <fct>         <dbl> <dbl>  <int>  <int>
1 EE      PAKISTAN 0-6 months   47991    127    380      1
2 EE      PAKISTAN 6-12 months  55494.    62    374      1
3 EE      PAKISTAN 12-18 months 52752.    87    365      1
4 EE      PAKISTAN 18-24 months 39263     47    350      1
5 ResPak  PAKISTAN 0-6 months   30772.   113    282      1
6 ResPak  PAKISTAN 6-12 months  33102.    48    236      1
7 ResPak  PAKISTAN 12-18 months 14410.    43    189      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months         15  31084. 0.000483 
2 6-12 months         3  35566. 0.0000844
3 12-18 months        2  33302. 0.0000601
4 18-24 months        4  30342  0.000132 
5 <NA>                8 152908. 0.0000523
# A tibble: 4 x 7
# Groups:   studyid, country [1]
  studyid country agecat         ptar ncase nchild nstudy
  <chr>   <chr>   <fct>         <dbl> <dbl>  <int>  <int>
1 MAL-ED  BRAZIL  0-6 months   31084.    15    233      1
2 MAL-ED  BRAZIL  6-12 months  35566.     3    207      1
3 MAL-ED  BRAZIL  12-18 months 33302.     2    194      1
4 MAL-ED  BRAZIL  18-24 months 30342      4    176      1
# A tibble: 3 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-6 months         10 39983   0.000250
2 6-12 months        22 47372.  0.000464
3 12-18 months        6 15858.  0.000378
# A tibble: 3 x 7
# Groups:   studyid, country [1]
  studyid       country   agecat         ptar ncase nchild nstudy
  <chr>         <chr>     <fct>         <dbl> <dbl>  <int>  <int>
1 Guatemala BSC GUATEMALA 0-6 months   39983     10    295      1
2 Guatemala BSC GUATEMALA 6-12 months  47372.    22    277      1
3 Guatemala BSC GUATEMALA 12-18 months 15858.     6    186      1
# A tibble: 5 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-6 months         15 74848. 0.000200 
2 6-12 months         6 86744. 0.0000692
3 12-18 months       12 73168. 0.000164 
4 18-24 months        9 72346  0.000124 
5 <NA>                1 84370. 0.0000119
# A tibble: 8 x 7
# Groups:   studyid, country [2]
  studyid country agecat         ptar ncase nchild nstudy
  <chr>   <chr>   <fct>         <dbl> <dbl>  <int>  <int>
1 CONTENT PERU    0-6 months   34982.     4    215      1
2 CONTENT PERU    6-12 months  40798.     0    215      1
3 CONTENT PERU    12-18 months 31704.     1    214      1
4 CONTENT PERU    18-24 months 35398      2    197      1
5 MAL-ED  PERU    0-6 months   39866     11    302      1
6 MAL-ED  PERU    6-12 months  45946      6    270      1
7 MAL-ED  PERU    12-18 months 41464     11    244      1
8 MAL-ED  PERU    18-24 months 36948      7    219      1
There were 50 or more warnings (use warnings() to see the first 50)
> ir.cohort <-
+   ir.data$ir.cohort %>% subset(., select = c(cohort,  agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> ir <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", ir.data$ir.res),
+   data.frame(cohort = "pooled", ir.country),
+   data.frame(cohort = "pooled", ir.region),
+   ir.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> #Incidence rate - no birth wasting
> ir.data.nobirth <- summary.ir(d_noBW, method="FE")
# A tibble: 5 x 4
  agecat       inc.case     ptar cruderate
  <fct>           <dbl>    <dbl>     <dbl>
1 0-6 months       1191 1252200   0.000951
2 6-12 months      1305 1419296   0.000919
3 12-18 months      965 1217980.  0.000792
4 18-24 months      719 1112511   0.000646
5 <NA>              646 2120684.  0.000305
# A tibble: 70 x 7
# Groups:   studyid, country [18]
   studyid        country    agecat         ptar ncase nchild nstudy
   <chr>          <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA      0-6 months   38288.   110    368      1
 2 CMC-V-BCS-2002 INDIA      6-12 months  54754     66    372      1
 3 CMC-V-BCS-2002 INDIA      12-18 months 58134.    34    373      1
 4 CMC-V-BCS-2002 INDIA      18-24 months 61138.    23    373      1
 5 CMIN           BANGLADESH 0-6 months   34766     32    272      1
 6 CMIN           BANGLADESH 6-12 months  40490.    56    252      1
 7 CMIN           BANGLADESH 12-18 months 36807     43    250      1
 8 CMIN           BANGLADESH 18-24 months 37222.    39    247      1
 9 CONTENT        PERU       0-6 months   34970.     3    215      1
10 CONTENT        PERU       6-12 months  40798.     0    215      1
# … with 60 more rows
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
6: Extra argument ('method') disregarded. 
> ir.region.nobirth <- d_noBW %>% group_by(region) %>% do(summary.ir(., method="FE")$ir.res)
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        512 669098.  0.000765
2 6-12 months       718 729792.  0.000984
3 12-18 months      464 618085   0.000751
4 18-24 months      332 530242.  0.000626
5 <NA>              173 540156.  0.000320
# A tibble: 16 x 7
# Groups:   studyid, country [4]
   studyid       country                  agecat        ptar ncase nchild nstudy
   <chr>         <chr>                    <fct>        <dbl> <dbl>  <int>  <int>
 1 Keneba        GAMBIA                   0-6 months  2.83e5   283   2435      1
 2 Keneba        GAMBIA                   6-12 months 3.53e5   469   2388      1
 3 Keneba        GAMBIA                   12-18 mont… 3.23e5   296   2283      1
 4 Keneba        GAMBIA                   18-24 mont… 3.99e5   288   2206      1
 5 MAL-ED        SOUTH AFRICA             0-6 months  3.78e4    14    312      1
 6 MAL-ED        SOUTH AFRICA             6-12 months 4.49e4    23    259      1
 7 MAL-ED        SOUTH AFRICA             12-18 mont… 4.25e4    18    253      1
 8 MAL-ED        SOUTH AFRICA             18-24 mont… 4.28e4    10    242      1
 9 MAL-ED        TANZANIA, UNITED REPUBL… 0-6 months  3.80e4    11    261      1
10 MAL-ED        TANZANIA, UNITED REPUBL… 6-12 months 4.32e4    16    245      1
11 MAL-ED        TANZANIA, UNITED REPUBL… 12-18 mont… 3.91e4    11    233      1
12 MAL-ED        TANZANIA, UNITED REPUBL… 18-24 mont… 4.02e4    10    228      1
13 TanzaniaChil… TANZANIA, UNITED REPUBL… 0-6 months  3.10e5   204   2396      1
14 TanzaniaChil… TANZANIA, UNITED REPUBL… 6-12 months 2.88e5   210   1996      1
15 TanzaniaChil… TANZANIA, UNITED REPUBL… 12-18 mont… 2.13e5   139   1455      1
16 TanzaniaChil… TANZANIA, UNITED REPUBL… 18-24 mont… 4.85e4    24    960      1
# A tibble: 5 x 4
  agecat       inc.case     ptar cruderate
  <fct>           <dbl>    <dbl>     <dbl>
1 0-6 months        658  437624.  0.00150 
2 6-12 months       557  519924.  0.00107 
3 12-18 months      481  477567   0.00101 
4 18-24 months      374  479580.  0.000780
5 <NA>              464 1343251   0.000345
# A tibble: 39 x 7
# Groups:   studyid, country [10]
   studyid        country    agecat         ptar ncase nchild nstudy
   <chr>          <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA      0-6 months   38288.   110    368      1
 2 CMC-V-BCS-2002 INDIA      6-12 months  54754     66    372      1
 3 CMC-V-BCS-2002 INDIA      12-18 months 58134.    34    373      1
 4 CMC-V-BCS-2002 INDIA      18-24 months 61138.    23    373      1
 5 CMIN           BANGLADESH 0-6 months   34766     32    272      1
 6 CMIN           BANGLADESH 6-12 months  40490.    56    252      1
 7 CMIN           BANGLADESH 12-18 months 36807     43    250      1
 8 CMIN           BANGLADESH 18-24 months 37222.    39    247      1
 9 EE             PAKISTAN   0-6 months   47767     83    380      1
10 EE             PAKISTAN   6-12 months  55494.    62    374      1
# … with 29 more rows
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months         21 145478  0.000144 
2 6-12 months        30 169580  0.000177 
3 12-18 months       20 122328. 0.000163 
4 18-24 months       13 102688  0.000127 
5 <NA>                9 237277  0.0000379
# A tibble: 15 x 7
# Groups:   studyid, country [4]
   studyid       country   agecat         ptar ncase nchild nstudy
   <chr>         <chr>     <fct>         <dbl> <dbl>  <int>  <int>
 1 CONTENT       PERU      0-6 months   34970.     3    215      1
 2 CONTENT       PERU      6-12 months  40798.     0    215      1
 3 CONTENT       PERU      12-18 months 31704.     1    214      1
 4 CONTENT       PERU      18-24 months 35398      2    197      1
 5 Guatemala BSC GUATEMALA 0-6 months   39606.     5    295      1
 6 Guatemala BSC GUATEMALA 6-12 months  47270     21    277      1
 7 Guatemala BSC GUATEMALA 12-18 months 15858.     6    186      1
 8 MAL-ED        BRAZIL    0-6 months   31051      8    233      1
 9 MAL-ED        BRAZIL    6-12 months  35566.     3    207      1
10 MAL-ED        BRAZIL    12-18 months 33302.     2    194      1
11 MAL-ED        BRAZIL    18-24 months 30342      4    176      1
12 MAL-ED        PERU      0-6 months   39851      5    302      1
13 MAL-ED        PERU      6-12 months  45946      6    270      1
14 MAL-ED        PERU      12-18 months 41464     11    244      1
15 MAL-ED        PERU      18-24 months 36948      7    219      1
There were 18 warnings (use warnings() to see them)
> ir.country.nobirth <- d_noBW %>% group_by(region, country) %>% do(summary.ir(., method="FE")$ir.res) 
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        283 283274   0.000999
2 6-12 months       469 353246   0.00133 
3 12-18 months      296 323471   0.000915
4 18-24 months      288 398740.  0.000722
5 <NA>              129 163797   0.000788
# A tibble: 4 x 7
# Groups:   studyid, country [1]
  studyid country agecat          ptar ncase nchild nstudy
  <chr>   <chr>   <fct>          <dbl> <dbl>  <int>  <int>
1 Keneba  GAMBIA  0-6 months   283274    283   2435      1
2 Keneba  GAMBIA  6-12 months  353246    469   2388      1
3 Keneba  GAMBIA  12-18 months 323471    296   2283      1
4 Keneba  GAMBIA  18-24 months 398740.   288   2206      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months         14  37834   0.000370
2 6-12 months        23  44895   0.000512
3 12-18 months       18  42525   0.000423
4 18-24 months       10  42836.  0.000233
5 <NA>               25 200511   0.000125
# A tibble: 4 x 7
# Groups:   studyid, country [1]
  studyid country      agecat         ptar ncase nchild nstudy
  <chr>   <chr>        <fct>         <dbl> <dbl>  <int>  <int>
1 MAL-ED  SOUTH AFRICA 0-6 months   37834     14    312      1
2 MAL-ED  SOUTH AFRICA 6-12 months  44895     23    259      1
3 MAL-ED  SOUTH AFRICA 12-18 months 42525     18    253      1
4 MAL-ED  SOUTH AFRICA 18-24 months 42836.    10    242      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        215 347990.  0.000618
2 6-12 months       226 331652.  0.000681
3 12-18 months      150 252089   0.000595
4 18-24 months       34  88666.  0.000383
5 <NA>               19 175848.  0.000108
# A tibble: 8 x 7
# Groups:   studyid, country [2]
  studyid       country                   agecat        ptar ncase nchild nstudy
  <chr>         <chr>                     <fct>        <dbl> <dbl>  <int>  <int>
1 MAL-ED        TANZANIA, UNITED REPUBLI… 0-6 months  3.80e4    11    261      1
2 MAL-ED        TANZANIA, UNITED REPUBLI… 6-12 months 4.32e4    16    245      1
3 MAL-ED        TANZANIA, UNITED REPUBLI… 12-18 mont… 3.91e4    11    233      1
4 MAL-ED        TANZANIA, UNITED REPUBLI… 18-24 mont… 4.02e4    10    228      1
5 TanzaniaChil… TANZANIA, UNITED REPUBLI… 0-6 months  3.10e5   204   2396      1
6 TanzaniaChil… TANZANIA, UNITED REPUBLI… 6-12 months 2.88e5   210   1996      1
7 TanzaniaChil… TANZANIA, UNITED REPUBLI… 12-18 mont… 2.13e5   139   1455      1
8 TanzaniaChil… TANZANIA, UNITED REPUBLI… 18-24 mont… 4.85e4    24    960      1
# A tibble: 5 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-6 months         88 150365  0.000585
2 6-12 months       106 159409  0.000665
3 12-18 months      115 147796  0.000778
4 18-24 months      101 168220  0.000600
5 <NA>              144 657346  0.000219
# A tibble: 12 x 7
# Groups:   studyid, country [3]
   studyid country    agecat         ptar ncase nchild nstudy
   <chr>   <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMIN    BANGLADESH 0-6 months   34766     32    272      1
 2 CMIN    BANGLADESH 6-12 months  40490.    56    252      1
 3 CMIN    BANGLADESH 12-18 months 36807     43    250      1
 4 CMIN    BANGLADESH 18-24 months 37222.    39    247      1
 5 MAL-ED  BANGLADESH 0-6 months   32142.    19    263      1
 6 MAL-ED  BANGLADESH 6-12 months  40672     18    240      1
 7 MAL-ED  BANGLADESH 12-18 months 36262.    25    231      1
 8 MAL-ED  BANGLADESH 18-24 months 34475     18    219      1
 9 PROVIDE BANGLADESH 0-6 months   83458.    37    700      1
10 PROVIDE BANGLADESH 6-12 months  78248.    32    611      1
11 PROVIDE BANGLADESH 12-18 months 74726.    47    605      1
12 PROVIDE BANGLADESH 18-24 months 96522.    44    583      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        284 109836.  0.00259 
2 6-12 months       175 150272   0.00116 
3 12-18 months      111 149058   0.000745
4 18-24 months       87 161994   0.000537
5 <NA>              287 542841   0.000529
# A tibble: 12 x 7
# Groups:   studyid, country [3]
   studyid        country agecat         ptar ncase nchild nstudy
   <chr>          <chr>   <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA   0-6 months   38288.   110    368      1
 2 CMC-V-BCS-2002 INDIA   6-12 months  54754     66    372      1
 3 CMC-V-BCS-2002 INDIA   12-18 months 58134.    34    373      1
 4 CMC-V-BCS-2002 INDIA   18-24 months 61138.    23    373      1
 5 IRC            INDIA   0-6 months   42550.   134    410      1
 6 IRC            INDIA   6-12 months  58724.    68    409      1
 7 IRC            INDIA   12-18 months 58184     50    410      1
 8 IRC            INDIA   18-24 months 64657     37    410      1
 9 MAL-ED         INDIA   0-6 months   28998.    40    251      1
10 MAL-ED         INDIA   6-12 months  36794.    41    235      1
11 MAL-ED         INDIA   12-18 months 32740.    27    229      1
12 MAL-ED         INDIA   18-24 months 36200.    27    228      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        140  99528.  0.00141 
2 6-12 months       166 121646.  0.00136 
3 12-18 months      125 113550   0.00110 
4 18-24 months      139 110104.  0.00126 
5 <NA>               32 140611   0.000228
# A tibble: 8 x 7
# Groups:   studyid, country [2]
  studyid   country agecat         ptar ncase nchild nstudy
  <chr>     <chr>   <fct>         <dbl> <dbl>  <int>  <int>
1 GMS-Nepal NEPAL   0-6 months   67521    124    686      1
2 GMS-Nepal NEPAL   6-12 months  79330    155    582      1
3 GMS-Nepal NEPAL   12-18 months 75572.   106    574      1
4 GMS-Nepal NEPAL   18-24 months 69404.   119    568      1
5 MAL-ED    NEPAL   0-6 months   32008.    16    240      1
6 MAL-ED    NEPAL   6-12 months  42316.    11    235      1
7 MAL-ED    NEPAL   12-18 months 37978.    19    231      1
8 MAL-ED    NEPAL   18-24 months 40699     20    229      1
# A tibble: 5 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-6 months        146 77894.  0.00187 
2 6-12 months       110 88596   0.00124 
3 12-18 months      130 67163   0.00194 
4 18-24 months       47 39263   0.00120 
5 <NA>                1  2453   0.000408
# A tibble: 7 x 7
# Groups:   studyid, country [2]
  studyid country  agecat         ptar ncase nchild nstudy
  <chr>   <chr>    <fct>         <dbl> <dbl>  <int>  <int>
1 EE      PAKISTAN 0-6 months   47767     83    380      1
2 EE      PAKISTAN 6-12 months  55494.    62    374      1
3 EE      PAKISTAN 12-18 months 52752.    87    365      1
4 EE      PAKISTAN 18-24 months 39263     47    350      1
5 ResPak  PAKISTAN 0-6 months   30126.    63    282      1
6 ResPak  PAKISTAN 6-12 months  33102.    48    236      1
7 ResPak  PAKISTAN 12-18 months 14410.    43    189      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months          8  31051  0.000258 
2 6-12 months         3  35566. 0.0000844
3 12-18 months        2  33302. 0.0000601
4 18-24 months        4  30342  0.000132 
5 <NA>                8 152908. 0.0000523
# A tibble: 4 x 7
# Groups:   studyid, country [1]
  studyid country agecat         ptar ncase nchild nstudy
  <chr>   <chr>   <fct>         <dbl> <dbl>  <int>  <int>
1 MAL-ED  BRAZIL  0-6 months   31051      8    233      1
2 MAL-ED  BRAZIL  6-12 months  35566.     3    207      1
3 MAL-ED  BRAZIL  12-18 months 33302.     2    194      1
4 MAL-ED  BRAZIL  18-24 months 30342      4    176      1
# A tibble: 3 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-6 months          5 39606.  0.000126
2 6-12 months        21 47270   0.000444
3 12-18 months        6 15858.  0.000378
# A tibble: 3 x 7
# Groups:   studyid, country [1]
  studyid       country   agecat         ptar ncase nchild nstudy
  <chr>         <chr>     <fct>         <dbl> <dbl>  <int>  <int>
1 Guatemala BSC GUATEMALA 0-6 months   39606.     5    295      1
2 Guatemala BSC GUATEMALA 6-12 months  47270     21    277      1
3 Guatemala BSC GUATEMALA 12-18 months 15858.     6    186      1
# A tibble: 5 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-6 months          8 74820. 0.000107 
2 6-12 months         6 86744. 0.0000692
3 12-18 months       12 73168. 0.000164 
4 18-24 months        9 72346  0.000124 
5 <NA>                1 84370. 0.0000119
# A tibble: 8 x 7
# Groups:   studyid, country [2]
  studyid country agecat         ptar ncase nchild nstudy
  <chr>   <chr>   <fct>         <dbl> <dbl>  <int>  <int>
1 CONTENT PERU    0-6 months   34970.     3    215      1
2 CONTENT PERU    6-12 months  40798.     0    215      1
3 CONTENT PERU    12-18 months 31704.     1    214      1
4 CONTENT PERU    18-24 months 35398      2    197      1
5 MAL-ED  PERU    0-6 months   39851      5    302      1
6 MAL-ED  PERU    6-12 months  45946      6    270      1
7 MAL-ED  PERU    12-18 months 41464     11    244      1
8 MAL-ED  PERU    18-24 months 36948      7    219      1
There were 50 or more warnings (use warnings() to see the first 50)
> ir.cohort.nobirth <-
+   ir.data$ir.cohort %>% subset(., select = c(cohort, agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> ir_noBW <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", ir.data.nobirth$ir.res),
+   data.frame(cohort = "pooled", ir.country.nobirth),
+   data.frame(cohort = "pooled", ir.region.nobirth),
+   ir.cohort.nobirth
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> #Incidence rate - severe wasting
> sev.ir.data <- summary.ir(d, sev.wasting = T, method="FE")
# A tibble: 5 x 4
  agecat       inc.case     ptar cruderate
  <fct>           <dbl>    <dbl>     <dbl>
1 0-6 months        671 1394376. 0.000481 
2 6-12 months       340 1540941  0.000221 
3 12-18 months      267 1352378  0.000197 
4 18-24 months      161 1209543  0.000133 
5 <NA>              100 2224278  0.0000450
# A tibble: 70 x 7
# Groups:   studyid, country [18]
   studyid        country    agecat         ptar ncase nchild nstudy
   <chr>          <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA      0-6 months   51274.    67    368      1
 2 CMC-V-BCS-2002 INDIA      6-12 months  64238.    18    372      1
 3 CMC-V-BCS-2002 INDIA      12-18 months 65014.     9    373      1
 4 CMC-V-BCS-2002 INDIA      18-24 months 65585      5    373      1
 5 CMIN           BANGLADESH 0-6 months   37178.    14    272      1
 6 CMIN           BANGLADESH 6-12 months  45040.    12    252      1
 7 CMIN           BANGLADESH 12-18 months 42838.     5    250      1
 8 CMIN           BANGLADESH 18-24 months 43509     13    247      1
 9 CONTENT        PERU       0-6 months   35176      1    215      1
10 CONTENT        PERU       6-12 months  40928.     0    215      1
# … with 60 more rows
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
6: Extra argument ('method') disregarded. 
> sev.ir.region <- d %>% group_by(region) %>% do(summary.ir(., sev.wasting = T, method="FE")$ir.res)
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        221 728413  0.000303 
2 6-12 months       211 789486. 0.000267 
3 12-18 months      138 672472. 0.000205 
4 18-24 months       88 566608. 0.000155 
5 <NA>               54 556771  0.0000970
# A tibble: 16 x 7
# Groups:   studyid, country [4]
   studyid       country                  agecat        ptar ncase nchild nstudy
   <chr>         <chr>                    <fct>        <dbl> <dbl>  <int>  <int>
 1 Keneba        GAMBIA                   0-6 months  3.19e5   132   2435      1
 2 Keneba        GAMBIA                   6-12 months 3.89e5   157   2388      1
 3 Keneba        GAMBIA                   12-18 mont… 3.59e5   104   2283      1
 4 Keneba        GAMBIA                   18-24 mont… 4.30e5    75   2206      1
 5 MAL-ED        SOUTH AFRICA             0-6 months  3.99e4     6    312      1
 6 MAL-ED        SOUTH AFRICA             6-12 months 4.62e4     3    259      1
 7 MAL-ED        SOUTH AFRICA             12-18 mont… 4.45e4     5    253      1
 8 MAL-ED        SOUTH AFRICA             18-24 mont… 4.40e4     2    242      1
 9 MAL-ED        TANZANIA, UNITED REPUBL… 0-6 months  3.85e4     4    261      1
10 MAL-ED        TANZANIA, UNITED REPUBL… 6-12 months 4.42e4     3    245      1
11 MAL-ED        TANZANIA, UNITED REPUBL… 12-18 mont… 4.06e4     1    233      1
12 MAL-ED        TANZANIA, UNITED REPUBL… 18-24 mont… 4.10e4     2    228      1
13 TanzaniaChil… TANZANIA, UNITED REPUBL… 0-6 months  3.31e5    79   2396      1
14 TanzaniaChil… TANZANIA, UNITED REPUBL… 6-12 months 3.10e5    48   1996      1
15 TanzaniaChil… TANZANIA, UNITED REPUBL… 12-18 mont… 2.28e5    28   1455      1
16 TanzaniaChil… TANZANIA, UNITED REPUBL… 18-24 mont… 5.15e4     9    960      1
# A tibble: 5 x 4
  agecat       inc.case     ptar cruderate
  <fct>           <dbl>    <dbl>     <dbl>
1 0-6 months        444  518320. 0.000857 
2 6-12 months       126  579902. 0.000217 
3 12-18 months      128  555380. 0.000230 
4 18-24 months       71  538504. 0.000132 
5 <NA>               44 1427570. 0.0000308
# A tibble: 39 x 7
# Groups:   studyid, country [10]
   studyid        country    agecat         ptar ncase nchild nstudy
   <chr>          <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA      0-6 months   51274.    67    368      1
 2 CMC-V-BCS-2002 INDIA      6-12 months  64238.    18    372      1
 3 CMC-V-BCS-2002 INDIA      12-18 months 65014.     9    373      1
 4 CMC-V-BCS-2002 INDIA      18-24 months 65585      5    373      1
 5 CMIN           BANGLADESH 0-6 months   37178.    14    272      1
 6 CMIN           BANGLADESH 6-12 months  45040.    12    252      1
 7 CMIN           BANGLADESH 12-18 months 42838.     5    250      1
 8 CMIN           BANGLADESH 18-24 months 43509     13    247      1
 9 EE             PAKISTAN   0-6 months   54408     36    380      1
10 EE             PAKISTAN   6-12 months  64780     18    374      1
# … with 29 more rows
# A tibble: 5 x 4
  agecat       inc.case    ptar  cruderate
  <fct>           <dbl>   <dbl>      <dbl>
1 0-6 months          6 147643  0.0000406 
2 6-12 months         3 171552  0.0000175 
3 12-18 months        1 124526  0.00000803
4 18-24 months        2 104431  0.0000192 
5 <NA>                2 239938. 0.00000834
# A tibble: 15 x 7
# Groups:   studyid, country [4]
   studyid       country   agecat         ptar ncase nchild nstudy
   <chr>         <chr>     <fct>         <dbl> <dbl>  <int>  <int>
 1 CONTENT       PERU      0-6 months   35176      1    215      1
 2 CONTENT       PERU      6-12 months  40928.     0    215      1
 3 CONTENT       PERU      12-18 months 31764      0    214      1
 4 CONTENT       PERU      18-24 months 35457      0    197      1
 5 Guatemala BSC GUATEMALA 0-6 months   40133      1    295      1
 6 Guatemala BSC GUATEMALA 6-12 months  48774.     2    277      1
 7 Guatemala BSC GUATEMALA 12-18 months 16620      0    186      1
 8 MAL-ED        BRAZIL    0-6 months   31880.     3    233      1
 9 MAL-ED        BRAZIL    6-12 months  35660.     0    207      1
10 MAL-ED        BRAZIL    12-18 months 33696.     0    194      1
11 MAL-ED        BRAZIL    18-24 months 30876.     1    176      1
12 MAL-ED        PERU      0-6 months   40454.     1    302      1
13 MAL-ED        PERU      6-12 months  46190.     1    270      1
14 MAL-ED        PERU      12-18 months 42446.     1    244      1
15 MAL-ED        PERU      18-24 months 38098.     1    219      1
There were 18 warnings (use warnings() to see them)
> sev.ir.country <- d %>% group_by(region, country) %>% do(summary.ir(., sev.wasting = T, method="FE")$ir.res) 
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        132 318978   0.000414
2 6-12 months       157 388774.  0.000404
3 12-18 months      104 358910   0.000290
4 18-24 months       75 430131   0.000174
5 <NA>               41 178885   0.000229
# A tibble: 4 x 7
# Groups:   studyid, country [1]
  studyid country agecat          ptar ncase nchild nstudy
  <chr>   <chr>   <fct>          <dbl> <dbl>  <int>  <int>
1 Keneba  GAMBIA  0-6 months   318978    132   2435      1
2 Keneba  GAMBIA  6-12 months  388774.   157   2388      1
3 Keneba  GAMBIA  12-18 months 358910    104   2283      1
4 Keneba  GAMBIA  18-24 months 430131     75   2206      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months          6  39877  0.000150 
2 6-12 months         3  46238  0.0000649
3 12-18 months        5  44481  0.000112 
4 18-24 months        2  43979  0.0000455
5 <NA>                7 201334. 0.0000348
# A tibble: 4 x 7
# Groups:   studyid, country [1]
  studyid country      agecat        ptar ncase nchild nstudy
  <chr>   <chr>        <fct>        <dbl> <dbl>  <int>  <int>
1 MAL-ED  SOUTH AFRICA 0-6 months   39877     6    312      1
2 MAL-ED  SOUTH AFRICA 6-12 months  46238     3    259      1
3 MAL-ED  SOUTH AFRICA 12-18 months 44481     5    253      1
4 MAL-ED  SOUTH AFRICA 18-24 months 43979     2    242      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months         83 369558  0.000225 
2 6-12 months        51 354474  0.000144 
3 12-18 months       29 269082. 0.000108 
4 18-24 months       11  92498. 0.000119 
5 <NA>                6 176552. 0.0000340
# A tibble: 8 x 7
# Groups:   studyid, country [2]
  studyid       country                   agecat        ptar ncase nchild nstudy
  <chr>         <chr>                     <fct>        <dbl> <dbl>  <int>  <int>
1 MAL-ED        TANZANIA, UNITED REPUBLI… 0-6 months  3.85e4     4    261      1
2 MAL-ED        TANZANIA, UNITED REPUBLI… 6-12 months 4.42e4     3    245      1
3 MAL-ED        TANZANIA, UNITED REPUBLI… 12-18 mont… 4.06e4     1    233      1
4 MAL-ED        TANZANIA, UNITED REPUBLI… 18-24 mont… 4.10e4     2    228      1
5 TanzaniaChil… TANZANIA, UNITED REPUBLI… 0-6 months  3.31e5    79   2396      1
6 TanzaniaChil… TANZANIA, UNITED REPUBLI… 6-12 months 3.10e5    48   1996      1
7 TanzaniaChil… TANZANIA, UNITED REPUBLI… 12-18 mont… 2.28e5    28   1455      1
8 TanzaniaChil… TANZANIA, UNITED REPUBLI… 18-24 mont… 5.15e4     9    960      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months         60 168528. 0.000356 
2 6-12 months        18 168558. 0.000107 
3 12-18 months       12 162999  0.0000736
4 18-24 months       18 181913  0.0000989
5 <NA>               10 684164. 0.0000146
# A tibble: 12 x 7
# Groups:   studyid, country [3]
   studyid country    agecat         ptar ncase nchild nstudy
   <chr>   <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMIN    BANGLADESH 0-6 months   37178.    14    272      1
 2 CMIN    BANGLADESH 6-12 months  45040.    12    252      1
 3 CMIN    BANGLADESH 12-18 months 42838.     5    250      1
 4 CMIN    BANGLADESH 18-24 months 43509     13    247      1
 5 MAL-ED  BANGLADESH 0-6 months   35642     17    263      1
 6 MAL-ED  BANGLADESH 6-12 months  42594      3    240      1
 7 MAL-ED  BANGLADESH 12-18 months 39426.     2    231      1
 8 MAL-ED  BANGLADESH 18-24 months 38590      0    219      1
 9 PROVIDE BANGLADESH 0-6 months   95709     29    700      1
10 PROVIDE BANGLADESH 6-12 months  80924      3    611      1
11 PROVIDE BANGLADESH 12-18 months 80734      5    605      1
12 PROVIDE BANGLADESH 18-24 months 99814      5    583      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months        219 139988. 0.00156  
2 6-12 months        34 173093  0.000196 
3 12-18 months       20 171958. 0.000116 
4 18-24 months       12 180668. 0.0000664
5 <NA>               27 593192. 0.0000455
# A tibble: 12 x 7
# Groups:   studyid, country [3]
   studyid        country agecat         ptar ncase nchild nstudy
   <chr>          <chr>   <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA   0-6 months   51274.    67    368      1
 2 CMC-V-BCS-2002 INDIA   6-12 months  64238.    18    372      1
 3 CMC-V-BCS-2002 INDIA   12-18 months 65014.     9    373      1
 4 CMC-V-BCS-2002 INDIA   18-24 months 65585      5    373      1
 5 IRC            INDIA   0-6 months   54190    131    410      1
 6 IRC            INDIA   6-12 months  67743     12    409      1
 7 IRC            INDIA   12-18 months 68338.     9    410      1
 8 IRC            INDIA   18-24 months 74118.     7    410      1
 9 MAL-ED         INDIA   0-6 months   34525     21    251      1
10 MAL-ED         INDIA   6-12 months  41112.     4    235      1
11 MAL-ED         INDIA   12-18 months 38606.     2    229      1
12 MAL-ED         INDIA   18-24 months 40966      0    228      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months         86 119093  0.000722 
2 6-12 months        41 136994. 0.000299 
3 12-18 months       53 140390. 0.000378 
4 18-24 months       27 126962. 0.000213 
5 <NA>                7 146835  0.0000477
# A tibble: 8 x 7
# Groups:   studyid, country [2]
  studyid   country agecat          ptar ncase nchild nstudy
  <chr>     <chr>   <fct>          <dbl> <dbl>  <int>  <int>
1 GMS-Nepal NEPAL   0-6 months    83696.    79    686      1
2 GMS-Nepal NEPAL   6-12 months   93480     40    582      1
3 GMS-Nepal NEPAL   12-18 months 100791     52    574      1
4 GMS-Nepal NEPAL   18-24 months  84616.    27    568      1
5 MAL-ED    NEPAL   0-6 months    35398.     7    240      1
6 MAL-ED    NEPAL   6-12 months   43514.     1    235      1
7 MAL-ED    NEPAL   12-18 months  39598.     1    231      1
8 MAL-ED    NEPAL   18-24 months  42346      0    229      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months         79  90710.  0.000871
2 6-12 months        33 101258.  0.000326
3 12-18 months       43  80034.  0.000537
4 18-24 months       14  48960.  0.000286
5 <NA>                0   3380.  0       
# A tibble: 7 x 7
# Groups:   studyid, country [2]
  studyid country  agecat         ptar ncase nchild nstudy
  <chr>   <chr>    <fct>         <dbl> <dbl>  <int>  <int>
1 EE      PAKISTAN 0-6 months   54408     36    380      1
2 EE      PAKISTAN 6-12 months  64780     18    374      1
3 EE      PAKISTAN 12-18 months 61081     25    365      1
4 EE      PAKISTAN 18-24 months 48960.    14    350      1
5 ResPak  PAKISTAN 0-6 months   36302.    43    282      1
6 ResPak  PAKISTAN 6-12 months  36478.    15    236      1
7 ResPak  PAKISTAN 12-18 months 18952.    18    189      1
# A tibble: 5 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-6 months          3  31880. 0.0000941
2 6-12 months         0  35660. 0        
3 12-18 months        0  33696. 0        
4 18-24 months        1  30876. 0.0000324
5 <NA>                0 154915  0        
# A tibble: 4 x 7
# Groups:   studyid, country [1]
  studyid country agecat         ptar ncase nchild nstudy
  <chr>   <chr>   <fct>         <dbl> <dbl>  <int>  <int>
1 MAL-ED  BRAZIL  0-6 months   31880.     3    233      1
2 MAL-ED  BRAZIL  6-12 months  35660.     0    207      1
3 MAL-ED  BRAZIL  12-18 months 33696.     0    194      1
4 MAL-ED  BRAZIL  18-24 months 30876.     1    176      1
# A tibble: 3 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-6 months          1 40133  0.0000249
2 6-12 months         2 48774. 0.0000410
3 12-18 months        0 16620  0        
# A tibble: 3 x 7
# Groups:   studyid, country [1]
  studyid       country   agecat         ptar ncase nchild nstudy
  <chr>         <chr>     <fct>         <dbl> <dbl>  <int>  <int>
1 Guatemala BSC GUATEMALA 0-6 months   40133      1    295      1
2 Guatemala BSC GUATEMALA 6-12 months  48774.     2    277      1
3 Guatemala BSC GUATEMALA 12-18 months 16620      0    186      1
# A tibble: 5 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-6 months          2 75630. 0.0000264
2 6-12 months         1 87118  0.0000115
3 12-18 months        1 74210. 0.0000135
4 18-24 months        1 73554. 0.0000136
5 <NA>                2 85022. 0.0000235
# A tibble: 8 x 7
# Groups:   studyid, country [2]
  studyid country agecat         ptar ncase nchild nstudy
  <chr>   <chr>   <fct>         <dbl> <dbl>  <int>  <int>
1 CONTENT PERU    0-6 months   35176      1    215      1
2 CONTENT PERU    6-12 months  40928.     0    215      1
3 CONTENT PERU    12-18 months 31764      0    214      1
4 CONTENT PERU    18-24 months 35457      0    197      1
5 MAL-ED  PERU    0-6 months   40454.     1    302      1
6 MAL-ED  PERU    6-12 months  46190.     1    270      1
7 MAL-ED  PERU    12-18 months 42446.     1    244      1
8 MAL-ED  PERU    18-24 months 38098.     1    219      1
There were 50 or more warnings (use warnings() to see the first 50)
> sev.ir.cohort <-
+   sev.ir.data$ir.cohort %>% subset(., select = c(cohort,agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> sev.ir <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", sev.ir.data$ir.res),
+   data.frame(cohort = "pooled", sev.ir.country),
+   data.frame(cohort = "pooled", sev.ir.region),
+   sev.ir.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> 
> 
> 
> 
> #Incidence rate - 3 month intervals
> d3 <- calc.ci.agecat(d, range = 3)
> agelst3 = list(
+   "0-3 months",
+   "3-6 months",
+   "6-9 months",
+   "9-12 months",
+   "12-15 months",
+   "15-18 months",
+   "18-21 months",
+   "21-24 months"
+ )
> ir.data <- summary.ir(d3, method="FE")
# A tibble: 9 x 4
  agecat       inc.case     ptar cruderate
  <fct>           <dbl>    <dbl>     <dbl>
1 0-3 months       1534  492655   0.00311 
2 3-6 months        635  769154.  0.000826
3 6-9 months        627  707610   0.000886
4 9-12 months       699  714541   0.000978
5 12-15 months      536  617213   0.000868
6 15-18 months      450  605570.  0.000743
7 18-21 months      392  580816.  0.000675
8 21-24 months      337  534994   0.000630
9 <NA>              653 2123329   0.000308
# A tibble: 139 x 7
# Groups:   studyid, country [18]
   studyid        country    agecat         ptar ncase nchild nstudy
   <chr>          <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA      0-3 months   17142.   155    362      1
 2 CMC-V-BCS-2002 INDIA      3-6 months   22598.    46    366      1
 3 CMC-V-BCS-2002 INDIA      6-9 months   26650.    35    371      1
 4 CMC-V-BCS-2002 INDIA      9-12 months  28104.    31    370      1
 5 CMC-V-BCS-2002 INDIA      12-15 months 28862.    19    371      1
 6 CMC-V-BCS-2002 INDIA      15-18 months 29272     15    371      1
 7 CMC-V-BCS-2002 INDIA      18-21 months 29886.    13    372      1
 8 CMC-V-BCS-2002 INDIA      21-24 months 31252     10    371      1
 9 CMIN           BANGLADESH 0-3 months   13480.    28    264      1
10 CMIN           BANGLADESH 3-6 months   21579     24    259      1
# … with 129 more rows
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
6: Extra argument ('method') disregarded. 
7: Extra argument ('method') disregarded. 
8: Extra argument ('method') disregarded. 
9: Extra argument ('method') disregarded. 
10: Extra argument ('method') disregarded. 
> ir.region <- d3 %>% group_by(region) %>% do(summary.ir(., method="FE")$ir.res)
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months        419 265957   0.00158 
2 3-6 months        332 407940.  0.000814
3 6-9 months        394 399930   0.000985
4 9-12 months       344 332616   0.00103 
5 12-15 months      257 295144   0.000871
6 15-18 months      228 327745   0.000696
7 18-21 months      185 288496   0.000641
8 21-24 months      157 245046   0.000641
9 <NA>              180 542801   0.000332
# A tibble: 32 x 7
# Groups:   studyid, country [4]
   studyid country      agecat          ptar ncase nchild nstudy
   <chr>   <chr>        <fct>          <dbl> <dbl>  <int>  <int>
 1 Keneba  GAMBIA       0-3 months   110273    189   2229      1
 2 Keneba  GAMBIA       3-6 months   174783    172   2266      1
 3 Keneba  GAMBIA       6-9 months   196108    259   2220      1
 4 Keneba  GAMBIA       9-12 months  159892.   230   2129      1
 5 Keneba  GAMBIA       12-15 months 147266.   164   1924      1
 6 Keneba  GAMBIA       15-18 months 181008.   153   1892      1
 7 Keneba  GAMBIA       18-21 months 203984.   153   1893      1
 8 Keneba  GAMBIA       21-24 months 198056.   145   1789      1
 9 MAL-ED  SOUTH AFRICA 0-3 months    15860     29    312      1
10 MAL-ED  SOUTH AFRICA 3-6 months    22070      7    271      1
# … with 22 more rows
# A tibble: 9 x 4
  agecat       inc.case     ptar cruderate
  <fct>           <dbl>    <dbl>     <dbl>
1 0-3 months       1091  182333   0.00598 
2 3-6 months        287  259664   0.00111 
3 6-9 months        223  217454.  0.00103 
4 9-12 months       334  302470   0.00110 
5 12-15 months      269  255670   0.00105 
6 15-18 months      212  221897   0.000955
7 18-21 months      201  240692   0.000835
8 21-24 months      173  238888.  0.000724
9 <NA>              464 1343251   0.000345
# A tibble: 78 x 7
# Groups:   studyid, country [10]
   studyid        country    agecat         ptar ncase nchild nstudy
   <chr>          <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA      0-3 months   17142.   155    362      1
 2 CMC-V-BCS-2002 INDIA      3-6 months   22598.    46    366      1
 3 CMC-V-BCS-2002 INDIA      6-9 months   26650.    35    371      1
 4 CMC-V-BCS-2002 INDIA      9-12 months  28104.    31    370      1
 5 CMC-V-BCS-2002 INDIA      12-15 months 28862.    19    371      1
 6 CMC-V-BCS-2002 INDIA      15-18 months 29272     15    371      1
 7 CMC-V-BCS-2002 INDIA      18-21 months 29886.    13    372      1
 8 CMC-V-BCS-2002 INDIA      21-24 months 31252     10    371      1
 9 CMIN           BANGLADESH 0-3 months   13480.    28    264      1
10 CMIN           BANGLADESH 3-6 months   21579     24    259      1
# … with 68 more rows
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months         24  44365  0.000541 
2 3-6 months         16 101549  0.000158 
3 6-9 months         10  90226. 0.000111 
4 9-12 months        21  79455  0.000264 
5 12-15 months       10  66399  0.000151 
6 15-18 months       10  55928. 0.000179 
7 18-21 months        6  51628. 0.000116 
8 21-24 months        7  51060. 0.000137 
9 <NA>                9 237277  0.0000379
# A tibble: 29 x 7
# Groups:   studyid, country [4]
   studyid       country   agecat         ptar ncase nchild nstudy
   <chr>         <chr>     <fct>         <dbl> <dbl>  <int>  <int>
 1 CONTENT       PERU      0-3 months   17185      2    215      1
 2 CONTENT       PERU      3-6 months   17796.     2    215      1
 3 CONTENT       PERU      6-9 months   20347      0    215      1
 4 CONTENT       PERU      9-12 months  20452.     0    215      1
 5 CONTENT       PERU      12-15 months 13558.     1    214      1
 6 CONTENT       PERU      15-18 months 18146      0    205      1
 7 CONTENT       PERU      18-21 months 17666.     0    197      1
 8 CONTENT       PERU      21-24 months 17732.     2    193      1
 9 Guatemala BSC GUATEMALA 3-6 months   39983     10    295      1
10 Guatemala BSC GUATEMALA 6-9 months   28850.     9    277      1
# … with 19 more rows
There were 30 warnings (use warnings() to see them)
> ir.country <- d3 %>% group_by(region, country) %>% do(summary.ir(., method="FE")$ir.res) 
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months        189 110273   0.00171 
2 3-6 months        172 174783   0.000984
3 6-9 months        259 196108   0.00132 
4 9-12 months       230 159892.  0.00144 
5 12-15 months      164 147266.  0.00111 
6 15-18 months      153 181008.  0.000845
7 18-21 months      153 203984.  0.000750
8 21-24 months      145 198056.  0.000732
9 <NA>              136 166442.  0.000817
# A tibble: 8 x 7
# Groups:   studyid, country [1]
  studyid country agecat          ptar ncase nchild nstudy
  <chr>   <chr>   <fct>          <dbl> <dbl>  <int>  <int>
1 Keneba  GAMBIA  0-3 months   110273    189   2229      1
2 Keneba  GAMBIA  3-6 months   174783    172   2266      1
3 Keneba  GAMBIA  6-9 months   196108    259   2220      1
4 Keneba  GAMBIA  9-12 months  159892.   230   2129      1
5 Keneba  GAMBIA  12-15 months 147266.   164   1924      1
6 Keneba  GAMBIA  15-18 months 181008.   153   1892      1
7 Keneba  GAMBIA  18-21 months 203984.   153   1893      1
8 Keneba  GAMBIA  21-24 months 198056.   145   1789      1
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months         29  15860   0.00183 
2 3-6 months          7  22070   0.000317
3 6-9 months          8  22168.  0.000361
4 9-12 months        15  22726.  0.000660
5 12-15 months       12  21882.  0.000548
6 15-18 months        6  20642.  0.000291
7 18-21 months        3  20760   0.000145
8 21-24 months        7  22076.  0.000317
9 <NA>               25 200511   0.000125
# A tibble: 8 x 7
# Groups:   studyid, country [1]
  studyid country      agecat         ptar ncase nchild nstudy
  <chr>   <chr>        <fct>         <dbl> <dbl>  <int>  <int>
1 MAL-ED  SOUTH AFRICA 0-3 months   15860     29    312      1
2 MAL-ED  SOUTH AFRICA 3-6 months   22070      7    271      1
3 MAL-ED  SOUTH AFRICA 6-9 months   22168.     8    257      1
4 MAL-ED  SOUTH AFRICA 9-12 months  22726.    15    254      1
5 MAL-ED  SOUTH AFRICA 12-15 months 21882.    12    253      1
6 MAL-ED  SOUTH AFRICA 15-18 months 20642.     6    246      1
7 MAL-ED  SOUTH AFRICA 18-21 months 20760      3    242      1
8 MAL-ED  SOUTH AFRICA 21-24 months 22076.     7    241      1
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months        201 139824   0.00144 
2 3-6 months        153 211088.  0.000725
3 6-9 months        127 181654.  0.000699
4 9-12 months        99 149998   0.000660
5 12-15 months       81 125995   0.000643
6 15-18 months       69 126094   0.000547
7 18-21 months       29  63752.  0.000455
8 21-24 months        5  24915   0.000201
9 <NA>               19 175848.  0.000108
# A tibble: 16 x 7
# Groups:   studyid, country [2]
   studyid       country                  agecat        ptar ncase nchild nstudy
   <chr>         <chr>                    <fct>        <dbl> <dbl>  <int>  <int>
 1 MAL-ED        TANZANIA, UNITED REPUBL… 0-3 months  1.61e4     7    261      1
 2 MAL-ED        TANZANIA, UNITED REPUBL… 3-6 months  2.19e4     7    253      1
 3 MAL-ED        TANZANIA, UNITED REPUBL… 6-9 months  2.09e4     6    245      1
 4 MAL-ED        TANZANIA, UNITED REPUBL… 9-12 months 2.23e4    10    238      1
 5 MAL-ED        TANZANIA, UNITED REPUBL… 12-15 mont… 1.90e4     6    233      1
 6 MAL-ED        TANZANIA, UNITED REPUBL… 15-18 mont… 2.01e4     5    232      1
 7 MAL-ED        TANZANIA, UNITED REPUBL… 18-21 mont… 1.97e4     5    227      1
 8 MAL-ED        TANZANIA, UNITED REPUBL… 21-24 mont… 2.05e4     5    219      1
 9 TanzaniaChil… TANZANIA, UNITED REPUBL… 0-3 months  1.24e5   194   2391      1
10 TanzaniaChil… TANZANIA, UNITED REPUBL… 3-6 months  1.89e5   146   2234      1
11 TanzaniaChil… TANZANIA, UNITED REPUBL… 6-9 months  1.61e5   121   1956      1
12 TanzaniaChil… TANZANIA, UNITED REPUBL… 9-12 months 1.28e5    89   1722      1
13 TanzaniaChil… TANZANIA, UNITED REPUBL… 12-15 mont… 1.07e5    75   1385      1
14 TanzaniaChil… TANZANIA, UNITED REPUBL… 15-18 mont… 1.06e5    64   1185      1
15 TanzaniaChil… TANZANIA, UNITED REPUBL… 18-21 mont… 4.40e4    24    927      1
16 TanzaniaChil… TANZANIA, UNITED REPUBL… 21-24 mont… 4.41e3     0     36      1
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months        242  62851   0.00385 
2 3-6 months         58  88388.  0.000656
3 6-9 months         31  41398   0.000749
4 9-12 months        75 118011   0.000636
5 12-15 months       56  87320.  0.000641
6 15-18 months       59  60476.  0.000976
7 18-21 months       59  85351   0.000691
8 21-24 months       42  82869   0.000507
9 <NA>              144 657346   0.000219
# A tibble: 24 x 7
# Groups:   studyid, country [3]
   studyid country    agecat         ptar ncase nchild nstudy
   <chr>   <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMIN    BANGLADESH 0-3 months   13480.    28    264      1
 2 CMIN    BANGLADESH 3-6 months   21579     24    259      1
 3 CMIN    BANGLADESH 6-9 months   20443     25    252      1
 4 CMIN    BANGLADESH 9-12 months  20046.    31    250      1
 5 CMIN    BANGLADESH 12-15 months 18137     19    249      1
 6 CMIN    BANGLADESH 15-18 months 18670     24    247      1
 7 CMIN    BANGLADESH 18-21 months 18452.    21    245      1
 8 CMIN    BANGLADESH 21-24 months 18771     18    243      1
 9 MAL-ED  BANGLADESH 0-3 months   12506.    53    263      1
10 MAL-ED  BANGLADESH 3-6 months   19772.    10    246      1
# … with 14 more rows
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months        418  44667   0.00936 
2 3-6 months        109  67246.  0.00162 
3 6-9 months         84  72956.  0.00115 
4 9-12 months        91  77316.  0.00118 
5 12-15 months       60  74059   0.000810
6 15-18 months       51  74999   0.000680
7 18-21 months       48  77120   0.000622
8 21-24 months       39  84874   0.000460
9 <NA>              287 542841   0.000529
# A tibble: 24 x 7
# Groups:   studyid, country [3]
   studyid        country agecat         ptar ncase nchild nstudy
   <chr>          <chr>   <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA   0-3 months   17142.   155    362      1
 2 CMC-V-BCS-2002 INDIA   3-6 months   22598.    46    366      1
 3 CMC-V-BCS-2002 INDIA   6-9 months   26650.    35    371      1
 4 CMC-V-BCS-2002 INDIA   9-12 months  28104.    31    370      1
 5 CMC-V-BCS-2002 INDIA   12-15 months 28862.    19    371      1
 6 CMC-V-BCS-2002 INDIA   15-18 months 29272     15    371      1
 7 CMC-V-BCS-2002 INDIA   18-21 months 29886.    13    372      1
 8 CMC-V-BCS-2002 INDIA   21-24 months 31252     10    371      1
 9 IRC            INDIA   0-3 months   16110.   193    408      1
10 IRC            INDIA   3-6 months   26776     47    407      1
# … with 14 more rows
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months        268  42496.  0.00631 
2 3-6 months         43  57587   0.000747
3 6-9 months         64  62198   0.00103 
4 9-12 months       102  59448.  0.00172 
5 12-15 months       80  56212.  0.00142 
6 15-18 months       45  57338.  0.000785
7 18-21 months       60  55182   0.00109 
8 21-24 months       79  54922.  0.00144 
9 <NA>               32 140611   0.000228
# A tibble: 16 x 7
# Groups:   studyid, country [2]
   studyid   country agecat         ptar ncase nchild nstudy
   <chr>     <chr>   <fct>         <dbl> <dbl>  <int>  <int>
 1 GMS-Nepal NEPAL   0-3 months   28694.   229    686      1
 2 GMS-Nepal NEPAL   3-6 months   39155     34    567      1
 3 GMS-Nepal NEPAL   6-9 months   41980.    62    570      1
 4 GMS-Nepal NEPAL   9-12 months  37350.    93    561      1
 5 GMS-Nepal NEPAL   12-15 months 38132.    72    564      1
 6 GMS-Nepal NEPAL   15-18 months 37439     34    559      1
 7 GMS-Nepal NEPAL   18-21 months 36213     50    554      1
 8 GMS-Nepal NEPAL   21-24 months 33192.    69    545      1
 9 MAL-ED    NEPAL   0-3 months   13801     39    240      1
10 MAL-ED    NEPAL   3-6 months   18432      9    238      1
11 MAL-ED    NEPAL   6-9 months   20218.     2    235      1
12 MAL-ED    NEPAL   9-12 months  22098      9    231      1
13 MAL-ED    NEPAL   12-15 months 18080      8    231      1
14 MAL-ED    NEPAL   15-18 months 19898.    11    231      1
15 MAL-ED    NEPAL   18-21 months 18969     10    229      1
16 MAL-ED    NEPAL   21-24 months 21730     10    229      1
# A tibble: 9 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-3 months        163 32320.  0.00504 
2 3-6 months         77 46443   0.00166 
3 6-9 months         44 40901   0.00108 
4 9-12 months        66 47695   0.00138 
5 12-15 months       73 38078   0.00192 
6 15-18 months       57 29085   0.00196 
7 18-21 months       34 23039   0.00148 
8 21-24 months       13 16224   0.000801
9 <NA>                1  2453   0.000408
# A tibble: 14 x 7
# Groups:   studyid, country [2]
   studyid country  agecat         ptar ncase nchild nstudy
   <chr>   <chr>    <fct>         <dbl> <dbl>  <int>  <int>
 1 EE      PAKISTAN 0-3 months   19698.    82    378      1
 2 EE      PAKISTAN 3-6 months   28292.    45    374      1
 3 EE      PAKISTAN 6-9 months   23638     31    374      1
 4 EE      PAKISTAN 9-12 months  31856.    31    370      1
 5 EE      PAKISTAN 12-15 months 27239     38    364      1
 6 EE      PAKISTAN 15-18 months 25514.    49    356      1
 7 EE      PAKISTAN 18-21 months 23039     34    350      1
 8 EE      PAKISTAN 21-24 months 16224     13    300      1
 9 ResPak  PAKISTAN 0-3 months   12621     81    280      1
10 ResPak  PAKISTAN 3-6 months   18150.    32    258      1
11 ResPak  PAKISTAN 6-9 months   17263     13    231      1
12 ResPak  PAKISTAN 9-12 months  15840.    35    211      1
13 ResPak  PAKISTAN 12-15 months 10839     35    188      1
14 ResPak  PAKISTAN 15-18 months  3572.     8    111      1
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months         14  12233  0.00114  
2 3-6 months          1  18850. 0.0000530
3 6-9 months          1  17728. 0.0000564
4 9-12 months         2  17838  0.000112 
5 12-15 months        1  16956. 0.0000590
6 15-18 months        1  16346  0.0000612
7 18-21 months        2  15266. 0.000131 
8 21-24 months        2  15076. 0.000133 
9 <NA>                8 152908. 0.0000523
# A tibble: 8 x 7
# Groups:   studyid, country [1]
  studyid country agecat         ptar ncase nchild nstudy
  <chr>   <chr>   <fct>         <dbl> <dbl>  <int>  <int>
1 MAL-ED  BRAZIL  0-3 months   12233     14    233      1
2 MAL-ED  BRAZIL  3-6 months   18850.     1    218      1
3 MAL-ED  BRAZIL  6-9 months   17728.     1    207      1
4 MAL-ED  BRAZIL  9-12 months  17838      2    198      1
5 MAL-ED  BRAZIL  12-15 months 16956.     1    194      1
6 MAL-ED  BRAZIL  15-18 months 16346      1    184      1
7 MAL-ED  BRAZIL  18-21 months 15266.     2    176      1
8 MAL-ED  BRAZIL  21-24 months 15076.     2    169      1
# A tibble: 5 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 3-6 months         10 39983   0.000250
2 6-9 months          9 28850.  0.000312
3 9-12 months        13 18521   0.000702
4 12-15 months        6 13994.  0.000429
5 15-18 months        0  1863   0       
# A tibble: 5 x 7
# Groups:   studyid, country [1]
  studyid       country   agecat         ptar ncase nchild nstudy
  <chr>         <chr>     <fct>         <dbl> <dbl>  <int>  <int>
1 Guatemala BSC GUATEMALA 3-6 months   39983     10    295      1
2 Guatemala BSC GUATEMALA 6-9 months   28850.     9    277      1
3 Guatemala BSC GUATEMALA 9-12 months  18521     13    216      1
4 Guatemala BSC GUATEMALA 12-15 months 13994.     6    186      1
5 Guatemala BSC GUATEMALA 15-18 months  1863      0     56      1
# A tibble: 9 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-3 months         10 32132  0.000311 
2 3-6 months          5 42716. 0.000117 
3 6-9 months          0 43648. 0        
4 9-12 months         6 43096  0.000139 
5 12-15 months        3 35448  0.0000846
6 15-18 months        9 37720. 0.000239 
7 18-21 months        4 36363  0.000110 
8 21-24 months        5 35983  0.000139 
9 <NA>                1 84370. 0.0000119
# A tibble: 16 x 7
# Groups:   studyid, country [2]
   studyid country agecat         ptar ncase nchild nstudy
   <chr>   <chr>   <fct>         <dbl> <dbl>  <int>  <int>
 1 CONTENT PERU    0-3 months   17185      2    215      1
 2 CONTENT PERU    3-6 months   17796.     2    215      1
 3 CONTENT PERU    6-9 months   20347      0    215      1
 4 CONTENT PERU    9-12 months  20452.     0    215      1
 5 CONTENT PERU    12-15 months 13558.     1    214      1
 6 CONTENT PERU    15-18 months 18146      0    205      1
 7 CONTENT PERU    18-21 months 17666.     0    197      1
 8 CONTENT PERU    21-24 months 17732.     2    193      1
 9 MAL-ED  PERU    0-3 months   14947      8    302      1
10 MAL-ED  PERU    3-6 months   24919      3    282      1
11 MAL-ED  PERU    6-9 months   23302.     0    269      1
12 MAL-ED  PERU    9-12 months  22644.     6    251      1
13 MAL-ED  PERU    12-15 months 21890.     2    244      1
14 MAL-ED  PERU    15-18 months 19574.     9    230      1
15 MAL-ED  PERU    18-21 months 18696.     4    219      1
16 MAL-ED  PERU    21-24 months 18252.     3    210      1
There were 50 or more warnings (use warnings() to see the first 50)
> ir.cohort <-
+   ir.data$ir.cohort %>% subset(., select = c(cohort,  agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> ir3 <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", ir.data$ir.res),
+   data.frame(cohort = "pooled", ir.country),
+   data.frame(cohort = "pooled", ir.region),
+   ir.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> #Incidence rate - no birth wasting
> d_noBW <- calc.ci.agecat(d_noBW, range = 3)
> ir.data.nobirth <- summary.ir(d_noBW, method="FE")
# A tibble: 9 x 4
  agecat       inc.case     ptar cruderate
  <fct>           <dbl>    <dbl>     <dbl>
1 0-3 months        573  484187   0.00118 
2 3-6 months        618  768013   0.000805
3 6-9 months        614  706056   0.000870
4 9-12 months       691  713240   0.000969
5 12-15 months      526  615157   0.000855
6 15-18 months      439  602822.  0.000728
7 18-21 months      390  580244.  0.000672
8 21-24 months      329  532268.  0.000618
9 <NA>              646 2120684.  0.000305
# A tibble: 139 x 7
# Groups:   studyid, country [18]
   studyid        country    agecat         ptar ncase nchild nstudy
   <chr>          <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA      0-3 months   15792.    66    362      1
 2 CMC-V-BCS-2002 INDIA      3-6 months   22496     44    366      1
 3 CMC-V-BCS-2002 INDIA      6-9 months   26650.    35    371      1
 4 CMC-V-BCS-2002 INDIA      9-12 months  28104.    31    370      1
 5 CMC-V-BCS-2002 INDIA      12-15 months 28862.    19    371      1
 6 CMC-V-BCS-2002 INDIA      15-18 months 29272     15    371      1
 7 CMC-V-BCS-2002 INDIA      18-21 months 29886.    13    372      1
 8 CMC-V-BCS-2002 INDIA      21-24 months 31252     10    371      1
 9 CMIN           BANGLADESH 0-3 months   13237      9    264      1
10 CMIN           BANGLADESH 3-6 months   21529     23    259      1
# … with 129 more rows
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
6: Extra argument ('method') disregarded. 
7: Extra argument ('method') disregarded. 
8: Extra argument ('method') disregarded. 
9: Extra argument ('method') disregarded. 
10: Extra argument ('method') disregarded. 
> ir.region.nobirth <- d_noBW %>% group_by(region) %>% do(summary.ir(., method="FE")$ir.res)
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months        189 261770.  0.000722
2 3-6 months        323 407329   0.000793
3 6-9 months        382 398478.  0.000959
4 9-12 months       336 331315   0.00101 
5 12-15 months      247 293088   0.000843
6 15-18 months      217 324997   0.000668
7 18-21 months      183 287923   0.000636
8 21-24 months      149 242320.  0.000615
9 <NA>              173 540156.  0.000320
# A tibble: 32 x 7
# Groups:   studyid, country [4]
   studyid country      agecat          ptar ncase nchild nstudy
   <chr>   <chr>        <fct>          <dbl> <dbl>  <int>  <int>
 1 Keneba  GAMBIA       0-3 months   109102.   120   2229      1
 2 Keneba  GAMBIA       3-6 months   174172.   163   2266      1
 3 Keneba  GAMBIA       6-9 months   194656.   247   2220      1
 4 Keneba  GAMBIA       9-12 months  158590.   222   2129      1
 5 Keneba  GAMBIA       12-15 months 145210.   154   1924      1
 6 Keneba  GAMBIA       15-18 months 178260.   142   1892      1
 7 Keneba  GAMBIA       18-21 months 203412.   151   1893      1
 8 Keneba  GAMBIA       21-24 months 195329    137   1789      1
 9 MAL-ED  SOUTH AFRICA 0-3 months    15764      7    312      1
10 MAL-ED  SOUTH AFRICA 3-6 months    22070      7    271      1
# … with 22 more rows
# A tibble: 9 x 4
  agecat       inc.case     ptar cruderate
  <fct>           <dbl>    <dbl>     <dbl>
1 0-3 months        374  178112   0.00210 
2 3-6 months        284  259512.  0.00109 
3 6-9 months        223  217454.  0.00103 
4 9-12 months       334  302470   0.00110 
5 12-15 months      269  255670   0.00105 
6 15-18 months      212  221897   0.000955
7 18-21 months      201  240692   0.000835
8 21-24 months      173  238888.  0.000724
9 <NA>              464 1343251   0.000345
# A tibble: 78 x 7
# Groups:   studyid, country [10]
   studyid        country    agecat         ptar ncase nchild nstudy
   <chr>          <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA      0-3 months   15792.    66    362      1
 2 CMC-V-BCS-2002 INDIA      3-6 months   22496     44    366      1
 3 CMC-V-BCS-2002 INDIA      6-9 months   26650.    35    371      1
 4 CMC-V-BCS-2002 INDIA      9-12 months  28104.    31    370      1
 5 CMC-V-BCS-2002 INDIA      12-15 months 28862.    19    371      1
 6 CMC-V-BCS-2002 INDIA      15-18 months 29272     15    371      1
 7 CMC-V-BCS-2002 INDIA      18-21 months 29886.    13    372      1
 8 CMC-V-BCS-2002 INDIA      21-24 months 31252     10    371      1
 9 CMIN           BANGLADESH 0-3 months   13237      9    264      1
10 CMIN           BANGLADESH 3-6 months   21529     23    259      1
# … with 68 more rows
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months         10  44306. 0.000226 
2 3-6 months         11 101172. 0.000109 
3 6-9 months          9  90125  0.0000999
4 9-12 months        21  79455  0.000264 
5 12-15 months       10  66399  0.000151 
6 15-18 months       10  55928. 0.000179 
7 18-21 months        6  51628. 0.000116 
8 21-24 months        7  51060. 0.000137 
9 <NA>                9 237277  0.0000379
# A tibble: 29 x 7
# Groups:   studyid, country [4]
   studyid       country   agecat         ptar ncase nchild nstudy
   <chr>         <chr>     <fct>         <dbl> <dbl>  <int>  <int>
 1 CONTENT       PERU      0-3 months   17173      1    215      1
 2 CONTENT       PERU      3-6 months   17796.     2    215      1
 3 CONTENT       PERU      6-9 months   20347      0    215      1
 4 CONTENT       PERU      9-12 months  20452.     0    215      1
 5 CONTENT       PERU      12-15 months 13558.     1    214      1
 6 CONTENT       PERU      15-18 months 18146      0    205      1
 7 CONTENT       PERU      18-21 months 17666.     0    197      1
 8 CONTENT       PERU      21-24 months 17732.     2    193      1
 9 Guatemala BSC GUATEMALA 3-6 months   39606.     5    295      1
10 Guatemala BSC GUATEMALA 6-9 months   28749      8    277      1
# … with 19 more rows
There were 30 warnings (use warnings() to see them)
> ir.country.nobirth <- d_noBW %>% group_by(region, country) %>% do(summary.ir(., method="FE")$ir.res) 
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months        120 109102.  0.00110 
2 3-6 months        163 174172.  0.000936
3 6-9 months        247 194656.  0.00127 
4 9-12 months       222 158590.  0.00140 
5 12-15 months      154 145210.  0.00106 
6 15-18 months      142 178260.  0.000797
7 18-21 months      151 203412.  0.000742
8 21-24 months      137 195329   0.000701
9 <NA>              129 163797   0.000788
# A tibble: 8 x 7
# Groups:   studyid, country [1]
  studyid country agecat          ptar ncase nchild nstudy
  <chr>   <chr>   <fct>          <dbl> <dbl>  <int>  <int>
1 Keneba  GAMBIA  0-3 months   109102.   120   2229      1
2 Keneba  GAMBIA  3-6 months   174172.   163   2266      1
3 Keneba  GAMBIA  6-9 months   194656.   247   2220      1
4 Keneba  GAMBIA  9-12 months  158590.   222   2129      1
5 Keneba  GAMBIA  12-15 months 145210.   154   1924      1
6 Keneba  GAMBIA  15-18 months 178260.   142   1892      1
7 Keneba  GAMBIA  18-21 months 203412.   151   1893      1
8 Keneba  GAMBIA  21-24 months 195329    137   1789      1
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months          7  15764   0.000444
2 3-6 months          7  22070   0.000317
3 6-9 months          8  22168.  0.000361
4 9-12 months        15  22726.  0.000660
5 12-15 months       12  21882.  0.000548
6 15-18 months        6  20642.  0.000291
7 18-21 months        3  20760   0.000145
8 21-24 months        7  22076.  0.000317
9 <NA>               25 200511   0.000125
# A tibble: 8 x 7
# Groups:   studyid, country [1]
  studyid country      agecat         ptar ncase nchild nstudy
  <chr>   <chr>        <fct>         <dbl> <dbl>  <int>  <int>
1 MAL-ED  SOUTH AFRICA 0-3 months   15764      7    312      1
2 MAL-ED  SOUTH AFRICA 3-6 months   22070      7    271      1
3 MAL-ED  SOUTH AFRICA 6-9 months   22168.     8    257      1
4 MAL-ED  SOUTH AFRICA 9-12 months  22726.    15    254      1
5 MAL-ED  SOUTH AFRICA 12-15 months 21882.    12    253      1
6 MAL-ED  SOUTH AFRICA 15-18 months 20642.     6    246      1
7 MAL-ED  SOUTH AFRICA 18-21 months 20760      3    242      1
8 MAL-ED  SOUTH AFRICA 21-24 months 22076.     7    241      1
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months         62 136903   0.000453
2 3-6 months        153 211088.  0.000725
3 6-9 months        127 181654.  0.000699
4 9-12 months        99 149998   0.000660
5 12-15 months       81 125995   0.000643
6 15-18 months       69 126094   0.000547
7 18-21 months       29  63752.  0.000455
8 21-24 months        5  24915   0.000201
9 <NA>               19 175848.  0.000108
# A tibble: 16 x 7
# Groups:   studyid, country [2]
   studyid       country                  agecat        ptar ncase nchild nstudy
   <chr>         <chr>                    <fct>        <dbl> <dbl>  <int>  <int>
 1 MAL-ED        TANZANIA, UNITED REPUBL… 0-3 months  1.61e4     4    261      1
 2 MAL-ED        TANZANIA, UNITED REPUBL… 3-6 months  2.19e4     7    253      1
 3 MAL-ED        TANZANIA, UNITED REPUBL… 6-9 months  2.09e4     6    245      1
 4 MAL-ED        TANZANIA, UNITED REPUBL… 9-12 months 2.23e4    10    238      1
 5 MAL-ED        TANZANIA, UNITED REPUBL… 12-15 mont… 1.90e4     6    233      1
 6 MAL-ED        TANZANIA, UNITED REPUBL… 15-18 mont… 2.01e4     5    232      1
 7 MAL-ED        TANZANIA, UNITED REPUBL… 18-21 mont… 1.97e4     5    227      1
 8 MAL-ED        TANZANIA, UNITED REPUBL… 21-24 mont… 2.05e4     5    219      1
 9 TanzaniaChil… TANZANIA, UNITED REPUBL… 0-3 months  1.21e5    58   2391      1
10 TanzaniaChil… TANZANIA, UNITED REPUBL… 3-6 months  1.89e5   146   2234      1
11 TanzaniaChil… TANZANIA, UNITED REPUBL… 6-9 months  1.61e5   121   1956      1
12 TanzaniaChil… TANZANIA, UNITED REPUBL… 9-12 months 1.28e5    89   1722      1
13 TanzaniaChil… TANZANIA, UNITED REPUBL… 12-15 mont… 1.07e5    75   1385      1
14 TanzaniaChil… TANZANIA, UNITED REPUBL… 15-18 mont… 1.06e5    64   1185      1
15 TanzaniaChil… TANZANIA, UNITED REPUBL… 18-21 mont… 4.40e4    24    927      1
16 TanzaniaChil… TANZANIA, UNITED REPUBL… 21-24 mont… 4.41e3     0     36      1
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months         31  62026.  0.000500
2 3-6 months         57  88338.  0.000645
3 6-9 months         31  41398   0.000749
4 9-12 months        75 118011   0.000636
5 12-15 months       56  87320.  0.000641
6 15-18 months       59  60476.  0.000976
7 18-21 months       59  85351   0.000691
8 21-24 months       42  82869   0.000507
9 <NA>              144 657346   0.000219
# A tibble: 24 x 7
# Groups:   studyid, country [3]
   studyid country    agecat         ptar ncase nchild nstudy
   <chr>   <chr>      <fct>         <dbl> <dbl>  <int>  <int>
 1 CMIN    BANGLADESH 0-3 months   13237      9    264      1
 2 CMIN    BANGLADESH 3-6 months   21529     23    259      1
 3 CMIN    BANGLADESH 6-9 months   20443     25    252      1
 4 CMIN    BANGLADESH 9-12 months  20046.    31    250      1
 5 CMIN    BANGLADESH 12-15 months 18137     19    249      1
 6 CMIN    BANGLADESH 15-18 months 18670     24    247      1
 7 CMIN    BANGLADESH 18-21 months 18452.    21    245      1
 8 CMIN    BANGLADESH 21-24 months 18771     18    243      1
 9 MAL-ED  BANGLADESH 0-3 months   12369      9    263      1
10 MAL-ED  BANGLADESH 3-6 months   19772.    10    246      1
# … with 14 more rows
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months        177  42694.  0.00415 
2 3-6 months        107  67143   0.00159 
3 6-9 months         84  72956.  0.00115 
4 9-12 months        91  77316.  0.00118 
5 12-15 months       60  74059   0.000810
6 15-18 months       51  74999   0.000680
7 18-21 months       48  77120   0.000622
8 21-24 months       39  84874   0.000460
9 <NA>              287 542841   0.000529
# A tibble: 24 x 7
# Groups:   studyid, country [3]
   studyid        country agecat         ptar ncase nchild nstudy
   <chr>          <chr>   <fct>         <dbl> <dbl>  <int>  <int>
 1 CMC-V-BCS-2002 INDIA   0-3 months   15792.    66    362      1
 2 CMC-V-BCS-2002 INDIA   3-6 months   22496     44    366      1
 3 CMC-V-BCS-2002 INDIA   6-9 months   26650.    35    371      1
 4 CMC-V-BCS-2002 INDIA   9-12 months  28104.    31    370      1
 5 CMC-V-BCS-2002 INDIA   12-15 months 28862.    19    371      1
 6 CMC-V-BCS-2002 INDIA   15-18 months 29272     15    371      1
 7 CMC-V-BCS-2002 INDIA   18-21 months 29886.    13    372      1
 8 CMC-V-BCS-2002 INDIA   21-24 months 31252     10    371      1
 9 IRC            INDIA   0-3 months   15774.    87    408      1
10 IRC            INDIA   3-6 months   26776     47    407      1
# … with 14 more rows
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months         97  41942.  0.00231 
2 3-6 months         43  57587   0.000747
3 6-9 months         64  62198   0.00103 
4 9-12 months       102  59448.  0.00172 
5 12-15 months       80  56212.  0.00142 
6 15-18 months       45  57338.  0.000785
7 18-21 months       60  55182   0.00109 
8 21-24 months       79  54922.  0.00144 
9 <NA>               32 140611   0.000228
# A tibble: 16 x 7
# Groups:   studyid, country [2]
   studyid   country agecat         ptar ncase nchild nstudy
   <chr>     <chr>   <fct>         <dbl> <dbl>  <int>  <int>
 1 GMS-Nepal NEPAL   0-3 months   28366     90    686      1
 2 GMS-Nepal NEPAL   3-6 months   39155     34    567      1
 3 GMS-Nepal NEPAL   6-9 months   41980.    62    570      1
 4 GMS-Nepal NEPAL   9-12 months  37350.    93    561      1
 5 GMS-Nepal NEPAL   12-15 months 38132.    72    564      1
 6 GMS-Nepal NEPAL   15-18 months 37439     34    559      1
 7 GMS-Nepal NEPAL   18-21 months 36213     50    554      1
 8 GMS-Nepal NEPAL   21-24 months 33192.    69    545      1
 9 MAL-ED    NEPAL   0-3 months   13576.     7    240      1
10 MAL-ED    NEPAL   3-6 months   18432      9    238      1
11 MAL-ED    NEPAL   6-9 months   20218.     2    235      1
12 MAL-ED    NEPAL   9-12 months  22098      9    231      1
13 MAL-ED    NEPAL   12-15 months 18080      8    231      1
14 MAL-ED    NEPAL   15-18 months 19898.    11    231      1
15 MAL-ED    NEPAL   18-21 months 18969     10    229      1
16 MAL-ED    NEPAL   21-24 months 21730     10    229      1
# A tibble: 9 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-3 months         69 31450.  0.00219 
2 3-6 months         77 46443   0.00166 
3 6-9 months         44 40901   0.00108 
4 9-12 months        66 47695   0.00138 
5 12-15 months       73 38078   0.00192 
6 15-18 months       57 29085   0.00196 
7 18-21 months       34 23039   0.00148 
8 21-24 months       13 16224   0.000801
9 <NA>                1  2453   0.000408
# A tibble: 14 x 7
# Groups:   studyid, country [2]
   studyid country  agecat         ptar ncase nchild nstudy
   <chr>   <chr>    <fct>         <dbl> <dbl>  <int>  <int>
 1 EE      PAKISTAN 0-3 months   19474.    38    378      1
 2 EE      PAKISTAN 3-6 months   28292.    45    374      1
 3 EE      PAKISTAN 6-9 months   23638     31    374      1
 4 EE      PAKISTAN 9-12 months  31856.    31    370      1
 5 EE      PAKISTAN 12-15 months 27239     38    364      1
 6 EE      PAKISTAN 15-18 months 25514.    49    356      1
 7 EE      PAKISTAN 18-21 months 23039     34    350      1
 8 EE      PAKISTAN 21-24 months 16224     13    300      1
 9 ResPak  PAKISTAN 0-3 months   11976     31    280      1
10 ResPak  PAKISTAN 3-6 months   18150.    32    258      1
11 ResPak  PAKISTAN 6-9 months   17263     13    231      1
12 ResPak  PAKISTAN 9-12 months  15840.    35    211      1
13 ResPak  PAKISTAN 12-15 months 10839     35    188      1
14 ResPak  PAKISTAN 15-18 months  3572.     8    111      1
# A tibble: 9 x 4
  agecat       inc.case    ptar cruderate
  <fct>           <dbl>   <dbl>     <dbl>
1 0-3 months          7  12200. 0.000574 
2 3-6 months          1  18850. 0.0000530
3 6-9 months          1  17728. 0.0000564
4 9-12 months         2  17838  0.000112 
5 12-15 months        1  16956. 0.0000590
6 15-18 months        1  16346  0.0000612
7 18-21 months        2  15266. 0.000131 
8 21-24 months        2  15076. 0.000133 
9 <NA>                8 152908. 0.0000523
# A tibble: 8 x 7
# Groups:   studyid, country [1]
  studyid country agecat         ptar ncase nchild nstudy
  <chr>   <chr>   <fct>         <dbl> <dbl>  <int>  <int>
1 MAL-ED  BRAZIL  0-3 months   12200.     7    233      1
2 MAL-ED  BRAZIL  3-6 months   18850.     1    218      1
3 MAL-ED  BRAZIL  6-9 months   17728.     1    207      1
4 MAL-ED  BRAZIL  9-12 months  17838      2    198      1
5 MAL-ED  BRAZIL  12-15 months 16956.     1    194      1
6 MAL-ED  BRAZIL  15-18 months 16346      1    184      1
7 MAL-ED  BRAZIL  18-21 months 15266.     2    176      1
8 MAL-ED  BRAZIL  21-24 months 15076.     2    169      1
# A tibble: 5 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 3-6 months          5 39606.  0.000126
2 6-9 months          8 28749   0.000278
3 9-12 months        13 18521   0.000702
4 12-15 months        6 13994.  0.000429
5 15-18 months        0  1863   0       
# A tibble: 5 x 7
# Groups:   studyid, country [1]
  studyid       country   agecat         ptar ncase nchild nstudy
  <chr>         <chr>     <fct>         <dbl> <dbl>  <int>  <int>
1 Guatemala BSC GUATEMALA 3-6 months   39606.     5    295      1
2 Guatemala BSC GUATEMALA 6-9 months   28749      8    277      1
3 Guatemala BSC GUATEMALA 9-12 months  18521     13    216      1
4 Guatemala BSC GUATEMALA 12-15 months 13994.     6    186      1
5 Guatemala BSC GUATEMALA 15-18 months  1863      0     56      1
# A tibble: 9 x 4
  agecat       inc.case   ptar cruderate
  <fct>           <dbl>  <dbl>     <dbl>
1 0-3 months          3 32105  0.0000934
2 3-6 months          5 42716. 0.000117 
3 6-9 months          0 43648. 0        
4 9-12 months         6 43096  0.000139 
5 12-15 months        3 35448  0.0000846
6 15-18 months        9 37720. 0.000239 
7 18-21 months        4 36363  0.000110 
8 21-24 months        5 35983  0.000139 
9 <NA>                1 84370. 0.0000119
# A tibble: 16 x 7
# Groups:   studyid, country [2]
   studyid country agecat         ptar ncase nchild nstudy
   <chr>   <chr>   <fct>         <dbl> <dbl>  <int>  <int>
 1 CONTENT PERU    0-3 months   17173      1    215      1
 2 CONTENT PERU    3-6 months   17796.     2    215      1
 3 CONTENT PERU    6-9 months   20347      0    215      1
 4 CONTENT PERU    9-12 months  20452.     0    215      1
 5 CONTENT PERU    12-15 months 13558.     1    214      1
 6 CONTENT PERU    15-18 months 18146      0    205      1
 7 CONTENT PERU    18-21 months 17666.     0    197      1
 8 CONTENT PERU    21-24 months 17732.     2    193      1
 9 MAL-ED  PERU    0-3 months   14932      2    302      1
10 MAL-ED  PERU    3-6 months   24919      3    282      1
11 MAL-ED  PERU    6-9 months   23302.     0    269      1
12 MAL-ED  PERU    9-12 months  22644.     6    251      1
13 MAL-ED  PERU    12-15 months 21890.     2    244      1
14 MAL-ED  PERU    15-18 months 19574.     9    230      1
15 MAL-ED  PERU    18-21 months 18696.     4    219      1
16 MAL-ED  PERU    21-24 months 18252.     3    210      1
There were 50 or more warnings (use warnings() to see the first 50)
> ir.cohort.nobirth <-
+   ir.data$ir.cohort %>% subset(., select = c(cohort, agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> ir_noBW3 <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", ir.data.nobirth$ir.res),
+   data.frame(cohort = "pooled", ir.country.nobirth),
+   data.frame(cohort = "pooled", ir.region.nobirth),
+   ir.cohort.nobirth
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> 
> 
> 
> #Recovery within 30, 60, 90 days
> #Overall
> df <- d %>% filter(agedays < 30.4617 * 24)
> df$agecat <- "0-24 months"
> overall.rec.data30 <- summary.rec60(df, length = 30, method="FE")
Warning message:
Extra argument ('method') disregarded. 
> overall.rec.data60 <- summary.rec60(df, length = 60, method="FE")
Warning message:
Extra argument ('method') disregarded. 
> overall.rec.data90 <- summary.rec60(df, length = 90, method="FE")
Warning message:
Extra argument ('method') disregarded. 
> overall.rec.data30$ci.res
  nstudies nmeas      est         se       lb       ub               nmeas.f
1       18  3754 34.92058 0.03501378 33.37753 36.49589 N=3,754  measurements
      nstudy.f method.used      agecat ptest.f
1 N=18 studies          FE 0-24 months      35
> overall.rec.data60$ci.res
  nstudies nmeas     est         se       lb      ub               nmeas.f
1       18  3754 57.2257 0.03353887 55.60952 58.8266 N=3,754  measurements
      nstudy.f method.used      agecat ptest.f
1 N=18 studies          FE 0-24 months      57
> overall.rec.data90$ci.res
  nstudies nmeas      est         se       lb       ub               nmeas.f
1       18  3754 64.71282 0.03478065 63.14098 66.25346 N=3,754  measurements
      nstudy.f method.used      agecat ptest.f
1 N=18 studies          FE 0-24 months      65
> 
> #Age-strat
> d <- calc.ci.agecat(d, range = 6)
> rec.data30 <- summary.rec60( d, length = 30, method="FE")
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
> rec.data60 <- summary.rec60( d, length = 60, method="FE")
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
> rec.data90 <- summary.rec60( d, length = 90, method="FE")
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
> rec30.region <- d %>% group_by(region) %>% do(summary.rec60( ., length = 30, method="FE")$ci.res)
There were 15 warnings (use warnings() to see them)
> rec60.region <- d %>% group_by(region) %>% do(summary.rec60( ., length = 60, method="FE")$ci.res)
There were 15 warnings (use warnings() to see them)
> rec90.region <- d %>% group_by(region) %>% do(summary.rec60( ., length = 90, method="FE")$ci.res)
There were 15 warnings (use warnings() to see them)
> rec30.country <- d %>% group_by(region, country) %>% do(summary.rec60( ., length = 30, method="FE")$ci.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> rec60.country <- d %>% group_by(region, country) %>% do(summary.rec60( ., length = 60, method="FE")$ci.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> rec90.country <- d %>% group_by(region, country) %>% do(summary.rec60( ., length = 90, method="FE")$ci.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> 
> rec30.cohort <-
+   rec.data30$ci.cohort %>% subset(., select = c(cohort, region, agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> rec60.cohort <-
+   rec.data60$ci.cohort %>% subset(., select = c(cohort, region, agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> rec90.cohort <-
+   rec.data90$ci.cohort %>% subset(., select = c(cohort, region, agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> rec30<- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", rec.data30$ci.res),
+   data.frame(cohort = "pooled", rec30.country),
+   data.frame(cohort = "pooled", rec30.region),
+   rec30.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> rec60<- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", rec.data60$ci.res),
+   data.frame(cohort = "pooled", rec60.country),
+   data.frame(cohort = "pooled", rec60.region),
+   rec60.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> rec90<- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", rec.data90$ci.res),
+   data.frame(cohort = "pooled", rec90.country),
+   data.frame(cohort = "pooled", rec90.region),
+   rec90.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> #Persistant wasting
> perswast.data <- summary.perswast(d, method="FE")
Warning messages:
1: Factor `agecat` contains implicit NA, consider using `forcats::fct_explicit_na` 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
4: Extra argument ('method') disregarded. 
5: Extra argument ('method') disregarded. 
> perswast.region <- d %>% group_by(region) %>% do(summary.perswast(., method="FE")$pers.res)
There were 15 warnings (use warnings() to see them)
> perswast.country <- d %>% group_by(region, country) %>% do(summary.perswast(., method="FE")$pers.res) 
There were 50 or more warnings (use warnings() to see the first 50)
> perswast.cohort <-
+   perswast.data$pers.cohort %>% subset(., select = c(cohort, region, agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> perswast <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", perswast.data$pers.res),
+   data.frame(cohort = "pooled", perswast.country),
+   data.frame(cohort = "pooled", perswast.region),
+   perswast.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> 
> #0-24 month persistent wasting
> df<- d %>% mutate(agecat="0-24 months")
> perswast.data <- summary.perswast(df, method="FE")
Warning message:
Extra argument ('method') disregarded. 
> perswast.region <- df %>% group_by(region) %>% do(summary.perswast(., method="FE")$pers.res)
Warning messages:
1: Extra argument ('method') disregarded. 
2: Extra argument ('method') disregarded. 
3: Extra argument ('method') disregarded. 
> perswast.country <- df %>% group_by(region, country) %>% do(summary.perswast(., method="FE")$pers.res) 
There were 14 warnings (use warnings() to see them)
> perswast.cohort <-
+   perswast.data$pers.cohort %>% subset(., select = c(cohort, region, agecat,  yi,  ci.lb,  ci.ub)) %>%
+   rename(est = yi,  lb = ci.lb,  ub = ci.ub)
> 
> perswast024 <- bind_rows(
+   data.frame(cohort = "pooled", region = "Overall", perswast.data$pers.res),
+   data.frame(cohort = "pooled", perswast.country),
+   data.frame(cohort = "pooled", perswast.region),
+   perswast.cohort
+ )
Warning messages:
1: In bind_rows_(x, .id) : Unequal factor levels: coercing to character
2: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
3: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
4: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
5: In bind_rows_(x, .id) :
  binding factor and character vector, coercing into character vector
6: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
7: In bind_rows_(x, .id) :
  binding character and factor vector, coercing into character vector
> save(perswast024, file = paste0(here(),"/results/persistent_wasting024_FE.Rdata"))
> 
> 
> 
> 
> 
> 
> 
> wasting_desc_data <- bind_rows(
+   data.frame(disease = "Wasting", age_range="3 months",   birth="yes", severe="no", measure= "Prevalence", prev),
+   data.frame(disease = "Wasting", age_range="3 months",   birth="yes", severe="yes", measure= "Prevalence", sev.prev),
+   data.frame(disease = "Wasting", age_range="3 months",   birth="yes", severe="no", measure= "Mean WLZ",  whz),
+   data.frame(disease = "Wasting", age_range="1 month",   birth="yes", severe="no", measure= "Mean WLZ",  monthly.whz),
+   data.frame(disease = "Wasting", age_range="3 months",   birth="yes", severe="no", measure= "Cumulative incidence", ci_3),
+   data.frame(disease = "Wasting", age_range="3 months",   birth="yes", severe="no", measure= "Incidence_proportion", ip_3),
+   data.frame(disease = "Wasting", age_range="6 months",   birth="no",  severe="no",   measure= "Cumulative incidence",  ci_nobw),
+   data.frame(disease = "Wasting", age_range="3 months",   birth="no",  severe="no",   measure= "Cumulative incidence",  ci_nobw3),
+   data.frame(disease = "Wasting", age_range="6 months",   birth="yes", severe="yes", measure= "Cumulative incidence",  sev.ci),
+   data.frame(disease = "Wasting", age_range="6 months",   birth="yes", severe="no", measure= "Incidence rate",  ir),
+   data.frame(disease = "Wasting", age_range="6 months",   birth="no", severe="no", measure= "Incidence rate",  ir_noBW),
+   data.frame(disease = "Wasting", age_range="3 months",   birth="yes", severe="no", measure= "Incidence rate",  ir3),
+   data.frame(disease = "Wasting", age_range="3 months",   birth="no", severe="no", measure= "Incidence rate",  ir_noBW3),  
+   data.frame(disease = "Wasting", age_range="6 months",   birth="yes", severe="yes", measure= "Incidence rate",  sev.ir),
+   data.frame(disease = "Wasting", age_range="6 months",   birth="yes", severe="no", measure= "Persistent wasting", perswast),
+   data.frame(disease = "Wasting", age_range="30 days",   birth="yes", severe="no", measure= "Recovery", rec30),
+   data.frame(disease = "Wasting", age_range="60 days",   birth="yes", severe="no", measure= "Recovery", rec60),
+   data.frame(disease = "Wasting", age_range="90 days",   birth="yes", severe="no", measure= "Recovery", rec90))
There were 50 or more warnings (use warnings() to see the first 50)
> 
> wasting_desc_data <- droplevels(wasting_desc_data)
> 
> 
> wasting_desc_data <- wasting_desc_data %>% subset(., select = -c(se, nmeas.f,  ptest.f, pt.f))
> 
> unique(wasting_desc_data$agecat)
 [1] "Birth"        "3 months"     "6 months"     "9 months"     "12 months"   
 [6] "15 months"    "18 months"    "21 months"    "24 months"    "Two weeks"   
[11] "One month"    "2 months"     "4 months"     "5 months"     "7 months"    
[16] "8 months"     "10 months"    "11 months"    "13 months"    "14 months"   
[21] "16 months"    "17 months"    "19 months"    "20 months"    "22 months"   
[26] "23 months"    "0-3 months"   "3-6 months"   "6-9 months"   "9-12 months" 
[31] "12-15 months" "15-18 months" "18-21 months" "21-24 months" "0-6 months"  
[36] "6-12 months"  "12-18 months" "18-24 months"
> wasting_desc_data$agecat <- factor(wasting_desc_data$agecat, levels=unique(wasting_desc_data$agecat))
> 
> unique(wasting_desc_data$region)
[1] "Overall"       "Africa"        "South Asia"    "Latin America"
[5] NA             
> wasting_desc_data$region[wasting_desc_data$region=="Asia"] <- "South Asia"
> wasting_desc_data$region <- factor(wasting_desc_data$region, levels=c("Overall", "Africa", "Latin America", "South Asia"))
> 
> #Add in variable for level of pooling
> wasting_desc_data <- wasting_desc_data %>% 
+   mutate(pooling = case_when(
+     cohort != "pooled" ~ "no pooling",
+     cohort == "pooled" & !is.na(country) ~ "country",
+     region != "Overall" ~ "regional",
+     region == "Overall" ~ "overall"
+   ))
> 
> table(wasting_desc_data$pooling)

   country no pooling    overall   regional 
      1423       2167        128        447 
> table(is.na(wasting_desc_data$pooling))

FALSE 
 4165 
> 
> 
> #clean country names
> wasting_desc_data$country[wasting_desc_data$country=="TANZANIA, UNITED REPUBLIC OF"] <- "TANZANIA"
> wasting_desc_data$country <- stringr::str_to_title(wasting_desc_data$country)
> 
> 
> 
> 
> saveRDS(wasting_desc_data, file = paste0(here(),"/results/wasting_desc_data_no_Kenaba_bw.RDS"))
> 
> 
> 
> 
> proc.time()
   user  system elapsed 
273.534  75.939 450.371 
